<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[postget]]></title>
  <link href="http://postget.me/atom.xml" rel="self"/>
  <link href="http://postget.me/"/>
  <updated>2014-02-10T20:14:57+08:00</updated>
  <id>http://postget.me/</id>
  <author>
    <name><![CDATA[MeiLin]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Spring Festival 2014]]></title>
    <link href="http://postget.me/blog/2014/02/09/spring-festival-2014/"/>
    <updated>2014-02-09T13:16:00+08:00</updated>
    <id>http://postget.me/blog/2014/02/09/spring-festival-2014</id>
    <content type="html"><![CDATA[<h2>25th Jan, the last weekend before spring festival, 2 days later I will go home.</h2>

<h3>I got up early to had Morning Tea that day. I like the plain porridge here.</h3>

<p><img src="https://dl.dropboxusercontent.com/u/128996895/Blog/spring%20festival%202014/1.jpg" alt="image" /></p>

<h3>After I had finished my breakfast, I climbed Nanshan mountain. I climbed Nanshan mountain every weekend in this year, and I&rsquo;d taken many photos at this spot.</h3>

<p><img src="https://dl.dropboxusercontent.com/u/128996895/Blog/spring%20festival%202014/2.jpg" alt="image" /></p>

<h3>I picked a beautiful leaf when I came down from the mountain, and I saved it in my wallet as decoration.</h3>

<p><img src="https://dl.dropboxusercontent.com/u/128996895/Blog/spring%20festival%202014/3.jpg" alt="image" /></p>

<h3>I took a photo of myself in front of a mirror in washroom on the mountain. I think this is the most formal photo of me in this year.</h3>

<p><img src="https://dl.dropboxusercontent.com/u/128996895/Blog/spring%20festival%202014/4.jpg" alt="image" /></p>

<h2>28th Jan, the 1st day of going home.</h2>

<h3>I was in the waiting room with my cousin. A 20 hours journey was waiting for us.</h3>

<p><img src="https://dl.dropboxusercontent.com/u/128996895/Blog/spring%20festival%202014/5.jpg" alt="image" /></p>

<h3>The kid sitting opposite me in the train. It seems he is so sad, actually he is very clever and active, he brought us a lot of fun.</h3>

<p><img src="https://dl.dropboxusercontent.com/u/128996895/Blog/spring%20festival%202014/6.jpg" alt="image" /></p>

<h2>29th Jan, the 2rd day of going home.</h2>

<h3>When I got off the train in Wuhan, and then gone to long-distance bus station, I saw the poor working woman sales Roast Corn and Roast Sweet Potato.</h3>

<p><img src="https://dl.dropboxusercontent.com/u/128996895/Blog/spring%20festival%202014/7.jpg" alt="image" /></p>

<h3>After 2 hours drove I arrived the crossing near my home.</h3>

<p><img src="https://dl.dropboxusercontent.com/u/128996895/Blog/spring%20festival%202014/8.jpg" alt="image" /></p>

<h3>When I came into home, my mom served me a cup of chicken soup, it was very yummy and warm.</h3>

<p><img src="https://dl.dropboxusercontent.com/u/128996895/Blog/spring%20festival%202014/9.jpg" alt="image" /></p>

<h2>30th Jan, spring festival&rsquo;s eve.</h2>

<h3>I was cooking fishes for the spring festival eve dinner. I had cooked every spring festival eve dinner since I entered college.</h3>

<p><img src="https://dl.dropboxusercontent.com/u/128996895/Blog/spring%20festival%202014/10.jpg" alt="image" /></p>

<h3>00:00, Happy new year!</h3>

<p><img src="https://dl.dropboxusercontent.com/u/128996895/Blog/spring%20festival%202014/11.jpg" alt="image" /></p>

<h2>31th Jan, the 1st day of lunar year.</h2>

<h3>Many relatives came to my home. This is my cousin and nephew, they are almost the same age, but they are different generations.</h3>

<p><img src="https://dl.dropboxusercontent.com/u/128996895/Blog/spring%20festival%202014/12.jpg" alt="image" /></p>

<h3>And, this is my cousins. They are different ages, but the same generation.</h3>

<p><img src="https://dl.dropboxusercontent.com/u/128996895/Blog/spring%20festival%202014/13.jpg" alt="image" /></p>

<h2>1th Feb, the 2nd day of lunar year.</h2>

<h3>I came to my uncle&rsquo;s home with my dad that day, my mom stayed at home to accompany my grandma. This is my uncle, the cup in his hand has a long history, my uncle said this cup had been in existence since the Korean War, I doubt it.</h3>

<p><img src="https://dl.dropboxusercontent.com/u/128996895/Blog/spring%20festival%202014/14.jpg" alt="image" /></p>

<h3>After lunch I had gone to the Changjiang river beach with my cousin and nephew. This is the place where I got grown and played since I was a child. Many memories came to me.</h3>

<p><img src="https://dl.dropboxusercontent.com/u/128996895/Blog/spring%20festival%202014/15.jpg" alt="image" /></p>

<h3>I asked my cousin and nephew waiting for me in a pool room, then I gone closer to these boats and took a long time to take photos.</h3>

<p><img src="https://dl.dropboxusercontent.com/u/128996895/Blog/spring%20festival%202014/16.jpg" alt="image" />
<img src="https://dl.dropboxusercontent.com/u/128996895/Blog/spring%20festival%202014/17.jpg" alt="image" />
<img src="https://dl.dropboxusercontent.com/u/128996895/Blog/spring%20festival%202014/18.jpg" alt="image" /></p>

<h3>Later, we walked through the road in front of my high school.</h3>

<p><img src="https://dl.dropboxusercontent.com/u/128996895/Blog/spring%20festival%202014/19.jpg" alt="image" /></p>

<h2>2th Feb, the 3rd day of lunar year.</h2>

<h3>That day, I came to the countryside to my another uncle&rsquo;s home. It&rsquo;s a remote village.</h3>

<p><img src="https://dl.dropboxusercontent.com/u/128996895/Blog/spring%20festival%202014/20.jpg" alt="image" /></p>

<h3>I saw the beautiful farmland.</h3>

<p><img src="https://dl.dropboxusercontent.com/u/128996895/Blog/spring%20festival%202014/21.jpg" alt="image" /></p>

<h3>And the beautiful sunset and trees.</h3>

<p><img src="https://dl.dropboxusercontent.com/u/128996895/Blog/spring%20festival%202014/22.jpg" alt="image" /></p>

<h2>3th Feb, the 4th day of lunar year.</h2>

<h3>I helped my dad to wire the new house for electricity.</h3>

<p><img src="https://dl.dropboxusercontent.com/u/128996895/Blog/spring%20festival%202014/23.jpg" alt="image" /></p>

<h3>This is the result. Actually, it&rsquo;s very hard to put the nail into the wall. My dad&rsquo;s finger was hurt in this process.</h3>

<p><img src="https://dl.dropboxusercontent.com/u/128996895/Blog/spring%20festival%202014/24.jpg" alt="image" /></p>

<h2>4th Feb, the 5th day of lunar year.</h2>

<h3>That day I had gone to the Li Shizhen memorial with my mom and relatives. My hometown is Li Shinzhen&rsquo;s hometown. Actually, I had visited the memorial many times since I was a student. The scenery is still same as I remembered, but the houses got old and damaged. I can felt the prosperity of traditional chinese medicine about 30 years ago, and its decline in nowadays.</h3>

<p><img src="https://dl.dropboxusercontent.com/u/128996895/Blog/spring%20festival%202014/25.jpg" alt="image" />
<img src="https://dl.dropboxusercontent.com/u/128996895/Blog/spring%20festival%202014/26.jpg" alt="image" /></p>

<h3>That night I cooked The Steamed Rice in Clay Pot for my parents. Actually, I cooked not very well. It was the last night I can stay at home. Tomorrow I will go back to Shenzhen.</h3>

<p><img src="https://dl.dropboxusercontent.com/u/128996895/Blog/spring%20festival%202014/27.jpg" alt="image" /></p>

<h2>5th Feb, the 6th day of lunar year.</h2>

<h3>I came to my cousin&rsquo;s home today, because here is near the railway station. I saw the traditional lunar new year picture in his home, it&rsquo;s very lovely.</h3>

<p><img src="https://dl.dropboxusercontent.com/u/128996895/Blog/spring%20festival%202014/28.jpg" alt="image" /></p>

<h2>6th Feb, the 7th day of lunar year.</h2>

<h3>My uncle drove us to the railway station at 2:30 AM.</h3>

<p><img src="https://dl.dropboxusercontent.com/u/128996895/Blog/spring%20festival%202014/29.jpg" alt="image" /></p>

<h3>Arrived to the railway station.</h3>

<p><img src="https://dl.dropboxusercontent.com/u/128996895/Blog/spring%20festival%202014/30.jpg" alt="image" /></p>

<h3>The kid in front of me in the queue.</h3>

<p><img src="https://dl.dropboxusercontent.com/u/128996895/Blog/spring%20festival%202014/31.jpg" alt="image" /></p>

<h3>I was reading book on the train. It&rsquo;s very funny that I took a book to home every year, but I rarely read them. Now I read from the first chapter.</h3>

<p><img src="https://dl.dropboxusercontent.com/u/128996895/Blog/spring%20festival%202014/32.jpg" alt="image" /></p>

<h3>Arrived to Heyuan, it was the time of sunset, the scenery is beautiful. It happened that one guy opened the window, so I can took many high quality pictures. 4 hours later I will arrive in Shenzhen.</h3>

<p><img src="https://dl.dropboxusercontent.com/u/128996895/Blog/spring%20festival%202014/33.jpg" alt="image" /></p>

<h3>Arrived to Shenzhen. I was on the subway.</h3>

<p><img src="https://dl.dropboxusercontent.com/u/128996895/Blog/spring%20festival%202014/34.jpg" alt="image" /></p>

<h2>7th Feb, the 8th day of lunar year.</h2>

<h3>On the way to the office.</h3>

<p><img src="https://dl.dropboxusercontent.com/u/128996895/Blog/spring%20festival%202014/35.jpg" alt="image" /></p>

<h3>After got off work I cooked dinner, the cured meat was brought from home, it has home&rsquo;s flavor.</h3>

<p><img src="https://dl.dropboxusercontent.com/u/128996895/Blog/spring%20festival%202014/36.jpg" alt="image" /></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[英语圈视频分享汇总]]></title>
    <link href="http://postget.me/blog/2014/01/08/video-sharing/"/>
    <updated>2014-01-08T23:02:00+08:00</updated>
    <id>http://postget.me/blog/2014/01/08/video-sharing</id>
    <content type="html"><![CDATA[

<p><img src="https://dl.dropboxusercontent.com/u/128996895/Blog/video%20sharing/video%20sharing.jpg" alt="image" /></p>

<p>从去年9月份开始，我在公司内部的英语学习社区“英语圈”中每天都分享了一个或是多个视频，到今天为止大概发了250个，点击量累计超过10000。这些视频的内容多数是欧美MV，也有一些励志短片、广告、宣传片、影视片段等。为了便于英语学习，我所挑选的这些视频大部分都带有中英文字幕。</p>

<p>过去的两年多以来，我每天回家的第一件事就是打开<a href="http://www.yinyuetai.com">音悦台</a>浏览和收藏各种MV（今年已经很少上音悦台了，现在每天回家的第一件事是打开<a href="https://news.ycombinator.com/news">Hacker News</a>），收藏夹里的1000多首MV是我所发视频的主要来源。非MV的视频主要来自优酷、新浪微博、Twitter、YouTube、Reddit等。</p>

<h3>MV我一般每次发两首，两首MV之间的搭配方式通常有以下几种：</h3>

<ul>
<li>同一个明星的两首代表作，如Coldplay的《Fix You》和《Yellow》、Ellie Goulding的《How Long Will I Love You》和《I Know You Care》、Lana Del Rey的《Young And Beautiful》和《Summertime Sadness》等</li>
<li>同一首歌曲的原唱和翻唱，如Jessie J原唱和吴莫愁翻唱的《Price Tag》、Lady Antebellum原唱和Adele &amp; Darius Rucker翻唱的《Need You Now》、Nelly原唱和Christina Grimmie &amp; Sam Tsui翻唱的《Just A Dream》等</li>
<li>同一首歌曲的电影饭制版和现场版，如《A New Day Has Come》的电影《One Day》饭制版和Celine Dion拉斯维加斯2007现场版、《Summer Train》的电影《Before Sunrise》饭制版和Greyson Chance钢琴弹唱版等</li>
<li>同名的两首歌曲，如分别来自Kelly Clarkson和Ne Yo的《Because Of You》、分别来自Gabz和Jason Chen &amp; Verseatile的《Lighters》、分别来自Tone Damli Aaberge &amp; Eric Saade和John Lennon的《Imagine》等</li>
<li>歌名相似的两首歌曲，如Cassadee Pope的《11》和Taylor Swift的《22》、Avicii的《Wake Me Up》和Green Day的《Wake Me Up When September Ends》</li>
<li>前奏相似的两首歌曲，如Chris Medina的《What Are Words》和Passenger的《Let Her Go》</li>
<li>两首励志歌曲，如The Script feat. will.i.am的《Hall Of Fame》和Matt Cardle的《Starlight》</li>
</ul>


<h3>碰到节假日我会单独挑选适合节假日的MV，如：</h3>

<ul>
<li>国庆节我发了8首狂欢MV 《Vacation》、《Algo Me Gusta De Ti》、《Glad You Came》、《Yeah 3x》、《I Gotta Feeling》、《On The Floor》、《Eenie Meenie》、《Documentary Of Eenie Meenie》</li>
<li>圣诞节发了5首精选圣诞歌曲《The Spirit Of Christmas Past》、《Christmas Lights》、《Angels We Have Heard on High》、《When Christmas Comes To Town》、《Blue Christmas》</li>
<li>元旦发的是Justin Bieber在New Year’s Eve 2012 in Times Square演唱的《Let It Be》</li>
<li><p>春节放假前的最后3天发了3首回家主题的歌曲，分别是Edward Sharpe &amp; The Magnetic Zeros的《Home》、Sophie Zelmani的《Going Home》、Skylar Grey的《Coming Home》第二版（2014.2.10补充）</p>

<h3>我还发过两个我很喜欢的电影插曲系列，不过大部分是中文歌曲，分别是：</h3></li>
<li><p>电影《中国合伙人》中的《李雷和韩梅梅》、《光阴的故事》、《海阔天空》、《花房姑娘》</p></li>
<li>电影《春娇与志明》中的《Drenched》、《最后的玫瑰》、《别为我是谁》</li>
</ul>


<h3>非MV的视频有：</h3>

<ul>
<li>广告，如NIKE的《Find Your Greatness – Jogger》、泰国电信的《Giving Is The Best Communication》、苹果的《Designed by Apple in California》</li>
<li>励志短片，如Nicholas Zakas On Fluent 2013的《A “Thank You” Can Change Your Life》</li>
<li>宣传片，如苹果的《Apple Recruitment Video 2012》、谷歌的《Google Zeitgeist Here’s to 2013》、code.org的《What Most Schools Don’t Teach》</li>
<li>影视片段，如NewsRoom中讨论“为什么美国是最伟大的国家”的片段</li>
</ul>


<h3>全部视频汇总列表</h3>

<p>这个列表是我用RUBY写的一个简单程序抓取的，使用了WIN32OLE库来操作浏览器，回头有空再写篇文章描述这个过程。（这里的视频链接都是链接到公司内部的，外部打不开。）（2014.2.10增加了第84～100个视频，并更新了点击次数。）<br></br>
<span class="badge badge-green">100.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=ff80808143a4fa9701441a16a4c21a55">两个国外的腹语和侧躺剧视频，与春晚中的节目类似。</a> Date: 2.10 Clicked: 19<br></br>
<span class="badge badge-green">99.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=ff80808143a4fa9701440fa1e4f3546b">The Monster &amp; Space Bound &ndash; Eminem</a> Date: 2.8 Clicked: 49<br></br>
<span class="badge badge-green">98.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=ff80808143a4fa9701440aade6b81308">Ambassador&rsquo;s New Year&rsquo;s Message to China</a> Date: 2.7 Clicked: 142<br></br>
<span class="badge badge-red">97.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=ff80808143a4fa970143d1d98512570c">Coming Home &ndash; Skylar Grey</a> Date: 1.27 Clicked: <font color=red>168</font><br></br>
<span class="badge badge-red">96.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=ff80808143a4fa970143cca81eec0f7a">Going Home &ndash; Sophie Zelmani</a> Date: 1.26 Clicked: <font color=red>161</font><br></br>
<span class="badge badge-red">95.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=ff80808143a4fa970143c249d24e39ef">Home &ndash; Edward Sharpe &amp; The Magnetic Zeros</a> Date: 1.24 Clicked: <font color=red>151</font><br></br>
<span class="badge badge-red">94.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=ff80808143a4fa970143bd32065e7968">Drifting in Los Angeles(漂泊洛杉矶)</a> Date: 1.23 Clicked: <font color=red>186</font><br></br>
<span class="badge badge-red">93.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=ff80808143a4fa970143b81075c3253b">口译实战观摩，台湾音乐人黄国伦在新加坡城市丰收教会所作的见证。</a> Date: 1.22 Clicked: <font color=red>270</font><br></br>
<span class="badge badge-red">92.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=ff80808143a4fa970143b2ebbf0d6884">Which life will you live &ndash; Wong Fu Productions</a> Date: 1.21 Clicked: <font color=red>208</font><br></br>
<span class="badge badge-green">91.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=ff80808143a4fa970143adca830b2291">President Obama calls on every American to learn code</a> Date: 1.20 Clicked: 133<br></br>
<span class="badge badge-red">90.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=ff808081436e0ac001439e4687027498">人在囧途之冬囧 &ndash; 淮秀帮</a> Date: 1.17 Clicked: <font color=red>242</font><br></br>
<span class="badge badge-red">89.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=ff808081436e0ac0014399275dbf37a5">Cloud Atlas Trailer</a> Date: 1.16 Clicked: <font color=red>184</font><br></br>
<span class="badge badge-red">88.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b0436e0f3b014393f81ec758ff">The Last &ndash; Wong Fu Productions</a> Date: 1.15 Clicked: <font color=red>320</font><br></br>
<span class="badge badge-red">87.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b0436e0f3b01438ed9d78f7623">Flash Mob Chorus at CWTC Beijing(惊喜合唱 北京国贸)</a> Date: 1.14 Clicked: <font color=red>199</font><br></br>
<span class="badge badge-red">86.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b0436e0f3b014389b4ff412e67">The Epic Split(Volvo ad)</a> Date: 1.14 Clicked: <font color=red>358</font><br></br>
<span class="badge badge-green">85.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b0436e0f3b01437a3498d1662a">A Pep Talk from Kid President to You</a> Date: 1.10 Clicked: 122<br></br>
<span class="badge badge-green">84.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b0436e0f3b0143751006c727e7">The Last Pick &ndash; Jeremy Lin(林书豪)</a> Date: 1.9 Clicked: 99<br></br>
<span class="badge badge-green">83.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=ff808081436e0ac001436fff0ae02442">The Real Google Interns&#8217; First Week</a> Date: 1.8 Clicked: 128<br></br>
<span class="badge badge-red">82.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b043194d4901436ad2ae3b154b">Apple Recruitment Video 2012</a> Date: 1.7 Clicked: <font color=red>152</font><br></br>
<span class="badge badge-red">81.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b043194d49014365a9c00d5821">What Most Schools Don&rsquo;t Teach</a> Date: 1.6 Clicked: <font color=red>348</font><br></br>
<span class="badge badge-red">80.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b043194d4901435648b1806610">Red &ndash; Taylor Swift</a> Date: 1.3 Clicked: <font color=red>156</font><br></br>
<span class="badge badge-green">79.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b043194d490143511666fe1593">Lighters(The One) &ndash; Gabz &amp; Lighters &ndash; Jason Chen and Verseatile</a> Date: 1.2 Clicked: 125<br></br>
<span class="badge badge-green">78.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b043194d49014346d9bf253d7f">Let It Be &ndash; Justin Bieber, New Year&rsquo;s Eve 2012 in Times Square.</a> Date: 1.2 Clicked: 124<br></br>
<span class="badge badge-green">77.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b043194d49014341a683686b15">Google Zeitgeist Here&rsquo;s to 2013</a> Date: 1.13 Clicked: 119<br></br>
<span class="badge badge-green">76.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=ff8080814319508b0143323a3b0e1365">I Knew You Were Trouble &amp; Sparks Fly &amp; Two Is Better Than One &ndash; Taylor Swift</a> Date: 12.27 Clicked: 126<br></br>
<span class="badge badge-green">75.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=ff8080814319508b01432d0186dc374f">11 &ndash; Cassadee Pope &amp; 22 &ndash; Taylor Swift</a> Date: 12.26 Clicked: 97<br></br>
<span class="badge badge-green">74.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b043194d49014327e064e531d4">The Spirit Of Christmas Past &amp; Christmas Lights &amp; Angels We Have Heard on High &amp; When Christmas Comes To Town &amp; Blue Christmas</a> Date: 12.25 Clicked: 144<br></br>
<span class="badge badge-green">73.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b043194d49014322cb334572b3">In The End &amp; Burn It Down &ndash; Linkin Park</a> Date: 12.24 Clicked: 102<br></br>
<span class="badge badge-green">72.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b043194d4901431d8992de1ba8">Mistletoe &ndash; Justin Bieber &amp; A Holly Jolly Christmas &ndash; Lady Antebellum</a> Date: 12.23 Clicked: 108<br></br>
<span class="badge badge-green">71.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b042cc5f1701430e3074f775a3">Wake Me Up &ndash; Avicii &amp; Wake Me Up When September Ends &ndash; Green Day</a> Date: 12.20 Clicked: 134<br></br>
<span class="badge badge-green">70.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b042cc5f170143090828d425dd">Daylight艺术家版和Ellen Show Live版</a> Date: 12.19 Clicked: 75<br></br>
<span class="badge badge-green">69.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b042cc5f17014303d349045b41">While Your Lips Are Still Red &amp; Nemo &ndash; Nightwish</a> Date: 12.18 Clicked: 84<br></br>
<span class="badge badge-green">68.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b042cc5f170142fea50cc779fd">Just The Way You Are &amp; Nothing On You &ndash; Bruno Mars</a> Date: 12.17 Clicked: 74<br></br>
<span class="badge badge-red">67.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b042cc5f170142f988c1c121fb">What Are Words &ndash; Chris Medina &amp; Let Her Go &ndash; Passenger</a> Date: 12.16 Clicked: <font color=red>241</font><br></br>
<span class="badge badge-green">66.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b042cc5f170142ea1909a440ad">Imagine &ndash; Tone Damli Aaberge and Eric Saade &amp; Imagine &ndash; John Lennon</a> Date: 12.13 Clicked: 125<br></br>
<span class="badge badge-green">65.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b042cc5f170142e51348257a07">《中国合伙人》歌曲4首</a> Date: 12.12 Clicked: 132<br></br>
<span class="badge badge-green">64.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b042cc5f170142e4e78cc17582">Young, Wild and Free &amp; Black And Yellow &ndash; Wiz Khalifa</a> Date: 12.12 Clicked: 81<br></br>
<span class="badge badge-green">63.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b042cc5f170142dfc47dd137a8">Payphone &amp; Moves Like Jagger &ndash; Maroon5</a> Date: 12.11 Clicked: 146<br></br>
<span class="badge badge-red">62.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b042cc5f170142daaaeb94740c">Story of My Life &amp; What Makes You Beautiful &amp; Forever Young &ndash; One Direction</a> Date: 12.10 Clicked: <font color=red>157</font><br></br>
<span class="badge badge-green">61.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b042cc5f170142d582f0451ce8">Stronger &amp; My Life Would Suck Without You &ndash; Kelly Clarkson</a> Date: 12.9 Clicked: 112<br></br>
<span class="badge badge-green">60.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b0429526a70142c606d03e30ea">Set The Record Straight &amp; Where Do We Go From Here &ndash; Christopher Nissen</a> Date: 12.6 Clicked: 138<br></br>
<span class="badge badge-red">59.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b0429526a70142c0dc11c46940">两首经典同名歌曲Because Of You，分别来自Kelly Clarkson和Ne Yo</a> Date: 12.5 Clicked: <font color=red>169</font><br></br>
<span class="badge badge-green">58.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b0429526a70142bbb6228b22b6">Broken &amp; Country Song &ndash; Jake Bugg</a> Date: 12.5 Clicked: 101<br></br>
<span class="badge badge-red">57.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b0429526a70142b7c4a2610340">《春娇与志明》插曲，共3首，6个MV</a> Date: 12.6 Clicked: <font color=red>251</font><br></br>
<span class="badge badge-green">56.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b0429526a70142b69330b45e67">Price Tag 吴莫愁翻唱版和Jessie J原版</a> Date: 12.5 Clicked: 112<br></br>
<span class="badge badge-red">55.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b0429526a70142b16493481862">老男孩，原版和曲婉婷翻唱版</a> Date: 12.2 Clicked: <font color=red>189</font><br></br>
<span class="badge badge-green">54.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b0429526a70142a1f8d549371f">流浪33天</a> Date: 12.30 Clicked: 77<br></br>
<span class="badge badge-green">53.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b0429526a701429cd884b95b4b">科技英语单词发音 &ndash; 王自如</a> Date: 11.28 Clicked: 89<br></br>
<span class="badge badge-green">52.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b0429526a70142979d590a13f8">Google IO 2013 Keynote &ndash; Larry Page</a> Date: 11.27 Clicked: 101<br></br>
<span class="badge badge-green">51.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b04232ee2c0142927880965b6e">Hold My Hand &amp; Right Now &amp; Lonely &ndash; Akon</a> Date: 11.26 Clicked: 106<br></br>
<span class="badge badge-green">50.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b04232ee2c01428d53d8771644">Just A Dream 翻唱和原唱</a> Date: 11.25 Clicked: 97<br></br>
<span class="badge badge-green">49.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b04232ee2c01427de40dc039f9">Hurt Lovers &ndash; Blue</a> Date: 11.22 Clicked: 101<br></br>
<span class="badge badge-red">48.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b04232ee2c014278c2471871f9">The Edge Of Glory &amp; I Wanna Be With You &ndash; Lady Gaga</a> Date: 11.21 Clicked: <font color=red>182</font><br></br>
<span class="badge badge-green">47.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b04232ee2c01427398ea80267f">Shoot To Thrill &amp; Highway To Hell &ndash; ACDC</a> Date: 11.20 Clicked: 112<br></br>
<span class="badge badge-green">46.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b04232ee2c01426e7b9e8b55fa">Young And Beautiful &amp; Summertime Sadness &ndash; Lana Del Rey</a> Date: 11.19 Clicked: 108<br></br>
<span class="badge badge-red">45.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b64232f1e90142694c85ba28b1">Bonfire Heart &ndash; James Blunt，MV和现场版。</a> Date: 11.18 Clicked: <font color=red>151</font><br></br>
<span class="badge badge-red">44.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b64232f1e9014259e60d463dde">Impossible &ndash; James Arthur，两个版本。</a> Date: 11.15 Clicked: <font color=red>155</font><br></br>
<span class="badge badge-red">43.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b64232f1e9014254c94b2e5655">Sunshine&amp;City Lights &ndash; Greyson Chance &amp; Interview Of Greyson Chance</a> Date: 11.14 Clicked: <font color=red>155</font><br></br>
<span class="badge badge-red">42.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b04232ee2c01424fa06d6f1335">Summer Train &ndash; Greyson Chance，电影《日出之前》（Before Sunrise，1994）剪辑版和现场版。</a> Date: 11.13 Clicked: <font color=red>174</font><br></br>
<span class="badge badge-green">41.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b04232ee2c01424a64fa674e84">The Power Of Love &amp; To Love You More &amp; I&rsquo;m Alive &amp; My Heart Will Go On &ndash; Celine Dion</a> Date: 11.13 Clicked: 112<br></br>
<span class="badge badge-green">40.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b04232ee2c0142454db3d30043">A New Day Has Come &ndash; Celine Dion</a> Date: 11.11 Clicked: 109<br></br>
<span class="badge badge-green">39.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b04232ee2c014235dbe56320aa">River Flows In You &ndash; Lindsey Stirling &amp; River Flows In You &ndash; Yiruma（李闰珉）</a> Date: 11.8 Clicked: 69<br></br>
<span class="badge badge-green">38.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b04232ee2c014235d1fa521fe0">Just Give Me A Reason &ndash; Pink and Nate Ruess</a> Date: 11.8 Clicked: 112<br></br>
<span class="badge badge-green">37.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b6422d3d0c014230b27dc42d3a">Carry On &amp; Some Nights &ndash; Fun.</a> Date: 11.7 Clicked: 101<br></br>
<span class="badge badge-red">36.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b6422859cf01422b92ed8317c0">Try &ndash; Pink，两种演绎。</a> Date: 11.6 Clicked: <font color=red>180</font><br></br>
<span class="badge badge-red">35.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b64221a4910142266f68514478">Lighters &amp; Not Afraid- Emienam</a> Date: 11.6 Clicked: <font color=red>289</font><br></br>
<span class="badge badge-green">34.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aae36914206c1a20142213f7fc30a4f">Right Here Waiting &ndash; Kurt Hugo Schneider &amp; Right Here Waiting &ndash; Richard Marx</a> Date: 11.4 Clicked: 65<br></br>
<span class="badge badge-green">33.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b041fca74f014211c872c125d0">Need You Now &ndash; Adele and Darius Rucker &amp; Need You Now &ndash; Lady Antebellum</a> Date: 11.1 Clicked: 97<br></br>
<span class="badge badge-green">32.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b041fca74f01420c9bc38867e8">You Raise Me Up &ndash; Westlife 王力宏 &amp; Lucky &ndash; Jason Mraz 邓紫棋</a> Date: 10.31 Clicked: 99<br></br>
<span class="badge badge-green">31.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b041fca74f0142077afbcc1e69">你不知道的事 &amp; 神话</a> Date: 10.30 Clicked: 98<br></br>
<span class="badge badge-green">30.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b041fca74f0142025c122518bb">Sometimes When We Touch &ndash; 周慧敏 邰正宵 &amp; Sometimes When We Touch &ndash; 周华健 李度</a> Date: 10.29 Clicked: 75<br></br>
<span class="badge badge-green">29.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b041e0957a0141e8cda00b6e5e">给我一首歌的时间 &ndash; 周杰伦 &amp; Angel &ndash; 电影《不能说的秘密》配乐</a> Date: 10.24 Clicked: 82<br></br>
<span class="badge badge-green">28.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b040d3da830141d9216fbb5717">I Love You &amp; Vincent &ndash; 王若琳</a> Date: 10.21 Clicked: 107<br></br>
<span class="badge badge-green">27.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b040d3da830141c9b6597a6e39">Curiosity &amp; Call Me Maybe &ndash; Carly Rae Jepsen</a> Date: 10.18 Clicked: 105<br></br>
<span class="badge badge-red">26.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b040d3da830141c48d018d2473">If I Lose Myself &amp; Apologize &ndash; One Republic</a> Date: 10.17 Clicked: <font color=red>167</font><br></br>
<span class="badge badge-green">25.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b040d3da830141bf5f795957bc">I Look To You &amp; When You Believe &ndash; Whitney Houston</a> Date: 10.16 Clicked: 125<br></br>
<span class="badge badge-red">24.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b040d3da830141ba41fc0c12bd">Someone Like You(Covered By SZ Students) &amp; Someone Like You(Live In Her Home)</a> Date: 10.15 Clicked: <font color=red>189</font><br></br>
<span class="badge badge-red">23.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b040d3da830141b51e6fe44084">Shadow Of The Day &amp; Iridescent &ndash; Linkin Park</a> Date: 10.14 Clicked: <font color=red>173</font><br></br>
<span class="badge badge-green">22.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b040d3da830141aac31a9a008d">Telling The World &amp; Break Your Heart &ndash; Taio Cruz</a> Date: 10.12 Clicked: 112<br></br>
<span class="badge badge-green">21.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b040d3da830141a58b5aaa32cb">Fix You &amp; Yellow &ndash; Coldplay</a> Date: 10.11 Clicked: 128<br></br>
<span class="badge badge-green">20.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b040d3da830141a0646d38640d">How Long Will I Love You &amp; I Know You Care &ndash; Ellie Goulding</a> Date: 10.10 Clicked: 116<br></br>
<span class="badge badge-green">19.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b040d3da8301419b52a24a1f58">Hall Of Fame &amp; Starlight</a> Date: 10.9 Clicked: 78<br></br>
<span class="badge badge-green">18.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b040d3da830141961fb6205a1f">Alligator Sky &amp; Fireflies &ndash; Owl City</a> Date: 10.8 Clicked: 77<br></br>
<span class="badge badge-green">17.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b040d3da8301416cba5c9402ee">Vacation &amp; Algo Me Gusta De Ti &amp; Glad You Came &amp; Yeah 3x &amp; I Gotta Feeling &amp; On The Floor &amp; Eenie Meenie &amp; Documentary Of Eenie Meenie</a> Date: 9.30 Clicked: 126<br></br>
<span class="badge badge-green">16.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b040d3da83014167d9c4df4d0c">Sailing &ndash; Rod Stewart</a> Date: 9.29 Clicked: 150<br></br>
<span class="badge badge-red">15.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b040d3da8301415d71ef3a0742">Documentary Of Never Say Never</a> Date: 9.27 Clicked: <font color=red>247</font><br></br>
<span class="badge badge-red">14.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b040d3da830141583f76c745cd">Better Off &ndash; Lindsey Ray &amp; Taylor Swift Interview</a> Date: 9.26 Clicked: <font color=red>241</font><br></br>
<span class="badge badge-red">13.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b040d3da830141532a5c040467">A &ldquo;Thank You&rdquo; Can Change Your Life &ndash; Nicholas Zakas On Fluent 2013</a> Date: 9.25 Clicked: <font color=red>196</font><br></br>
<span class="badge badge-red">12.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b040d3da8301414e0101cb36b7">Motivational Video Clips With An Energetic Music</a> Date: 9.24 Clicked: <font color=red>360</font><br></br>
<span class="badge badge-red">11.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b040d3da83014149168f19065d">Clip Of The Newsroom</a> Date: 9.23 Clicked: <font color=red>195</font><br></br>
<span class="badge badge-red">10.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b040d3da8301414405b9a24650">Daylight &ndash; Maroon 5</a> Date: 9.22 Clicked: <font color=red>178</font><br></br>
<span class="badge badge-red">9.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b040d3da8301412f0c349f73c3">SexyMandarin</a> Date: 9.18 Clicked: <font color=red>156</font><br></br>
<span class="badge badge-red">8.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b040d3da8301412a2a89ff453c">Drenched &ndash; Wanting</a> Date: 12.6 Clicked: <font color=red>176</font><br></br>
<span class="badge badge-red">7.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b040d3da83014125a039261f8d">Just Waiting For U</a> Date: 9.16 Clicked: <font color=red>364</font><br></br>
<span class="badge badge-green">6.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b040d3da830141258cc1ae1dd4">Giving Is The Best Communication</a> Date: 9.16 Clicked: 121<br></br>
<span class="badge badge-green">5.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b040d3da8301412461a1ab7f20">Whale Watching From Canoe</a> Date: 9.16 Clicked: 59<br></br>
<span class="badge badge-red">4.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b040d3da8301410fe4d46400b3">About English Learning &ndash; By TechMessager</a> Date: 9.12 Clicked: <font color=red>183</font><br></br>
<span class="badge badge-green">3.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b040d3da8301410a89811a4e1a">Be Water My Friend &ndash; Bruce Lee Remix</a> Date: 9.11 Clicked: 110<br></br>
<span class="badge badge-green">2.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b040d3da830141057e16fb1ab3">Designed by Apple in California</a> Date: 9.10 Clicked: 130<br></br>
<span class="badge badge-green">1.</span> <a href="http://share.zte.com.cn/tech/jsp/specdocshare?docid=8aa906b040d3da8301410172c7027c7c">Find Your Greatness &ndash; Jogger</a> Date: 9.9 Clicked: 126<br></br>
Clicked Counts: 14652</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[139元的总线扩展实验]]></title>
    <link href="http://postget.me/blog/2013/08/31/bus-expand/"/>
    <updated>2013-08-31T15:01:00+08:00</updated>
    <id>http://postget.me/blog/2013/08/31/bus-expand</id>
    <content type="html"><![CDATA[<blockquote><p>做这个实验，前后准备了大概一个星期，先是搜集资料和熟悉资料，然后对比了几种不同的Verilog写法，最后考虑该怎么搭建环境验证。原本利用手头上已有的开发板是可以至少搭建出两种实验环境的，但我嫌太麻烦，需要飞很多线，所以最后还是在淘宝找来了现成的开发板，139元，周三拍的，周五收到，周六顺利完成实验。</p></blockquote>


<p><img src="https://dl.dropboxusercontent.com/u/128996895/Blog/bus_expand/board.jpg" alt="image" /></p>

<h3>引脚整理</h3>

<p>核心板加主板形式的开发板，很讨厌的一件事情就是查找引脚对应关系，正准备在纸上画个表格的，突然想起前不久看到过一个做表格的gem，正好可以拿来试试。弄了好半天都没有搞定怎么用Ruby把两个表格横向拼在一起，最后只好用了<code>paste</code>命令。
<a href="https://dl.dropboxusercontent.com/u/128996895/Blog/bus_expand/screen.png"><img src="https://dl.dropboxusercontent.com/u/128996895/Blog/bus_expand/screen.png" alt="image" /></a></p>

<h3>CPU程序</h3>

<p>简单的测试程序。8051访问外部地址空间的写法搜集了一下，大概有3种，见注释掉的部分。</p>

<figure class='code'><figcaption><span> (bus_expand.c)</span> <a href='http://postget.me/downloads/code/bus_expand/bus_expand.c'>download</a></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
</pre></td><td class='code'><pre><code class='c'><span class='line'><span class="cp">#include &lt;reg51.h&gt;</span>
</span><span class='line'><span class="c1">//#include &lt;absacc.h&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="c1">//#define LED_REG XBYTE[0x00001]</span>
</span><span class='line'><span class="c1">//#define KEY_REG XBYTE[0x00002]</span>
</span><span class='line'>
</span><span class='line'><span class="c1">//unsigned char xdata led_reg _at_ 0x0001; </span>
</span><span class='line'><span class="c1">//unsigned char xdata key_reg _at_ 0x0002;</span>
</span><span class='line'>
</span><span class='line'><span class="cp">#define LED_REG *(volatile unsigned char xdata *) 0x0001</span>
</span><span class='line'><span class="cp">#define KEY_REG *(volatile unsigned char xdata *) 0x0002</span>
</span><span class='line'>
</span><span class='line'><span class="kt">void</span> <span class="nf">delay_200ms</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">i</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
</span><span class='line'>    <span class="n">j</span> <span class="o">=</span> <span class="mi">134</span><span class="p">;</span>
</span><span class='line'>    <span class="n">k</span> <span class="o">=</span> <span class="mi">20</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">do</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="k">do</span>
</span><span class='line'>        <span class="p">{</span>
</span><span class='line'>            <span class="k">while</span> <span class="p">(</span><span class="o">--</span><span class="n">k</span><span class="p">);</span>
</span><span class='line'>        <span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="o">--</span><span class="n">j</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="o">--</span><span class="n">i</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">LED_REG</span> <span class="o">=</span> <span class="mh">0xff</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">8</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="n">LED_REG</span> <span class="o">=</span> <span class="o">~</span><span class="p">(</span><span class="mh">0x01</span> <span class="o">&lt;&lt;</span> <span class="n">i</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">delay_200ms</span><span class="p">();</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">while</span> <span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="n">LED_REG</span> <span class="o">=</span> <span class="n">KEY_REG</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h3>CPLD程序</h3>

<p>这个程序调试了好久，反复对比Rtl才得出现在这个样子，不知道还能不能优化？注释掉的两个地方值得注意，这些细小的差异会导致Rtl的异非常大，目前这种写法资源消耗最少。这个程序还可以写成模块化的形式，分成总线接口、LED、KEY三个模块，我参考的一份程序是这么弄的。</p>

<figure class='code'><figcaption><span> (bus_expand.v)</span> <a href='http://postget.me/downloads/code/bus_expand/bus_expand.v'>download</a></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
</pre></td><td class='code'><pre><code class='v'><span class='line'><span class="k">module</span> <span class="n">bus_expand</span> <span class="p">(</span>
</span><span class='line'>    <span class="n">io_ad</span><span class="p">,</span>
</span><span class='line'>    <span class="n">i_ah</span><span class="p">,</span>
</span><span class='line'>    <span class="n">i_wr</span><span class="p">,</span>
</span><span class='line'>    <span class="n">i_rd</span><span class="p">,</span>
</span><span class='line'>    <span class="n">i_ale</span><span class="p">,</span>
</span><span class='line'>      
</span><span class='line'>    <span class="n">i_key</span><span class="p">,</span>
</span><span class='line'>    <span class="n">o_led</span>
</span><span class='line'><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="k">inout</span> <span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span> <span class="n">io_ad</span><span class="p">;</span>
</span><span class='line'><span class="k">input</span> <span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span> <span class="n">i_ah</span><span class="p">;</span>
</span><span class='line'><span class="k">input</span> <span class="n">i_wr</span><span class="p">;</span>
</span><span class='line'><span class="k">input</span> <span class="n">i_rd</span><span class="p">;</span>
</span><span class='line'><span class="k">input</span> <span class="n">i_ale</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="k">input</span> <span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span> <span class="n">i_key</span><span class="p">;</span>
</span><span class='line'><span class="k">output</span> <span class="kt">reg</span> <span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span> <span class="n">o_led</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="kt">reg</span> <span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span> <span class="n">r_al</span><span class="p">;</span>
</span><span class='line'><span class="kt">wire</span> <span class="p">[</span><span class="mh">15</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span> <span class="n">w_addr</span><span class="p">;</span>
</span><span class='line'><span class="kt">wire</span> <span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span> <span class="n">w_out_data</span><span class="p">;</span>
</span><span class='line'><span class="kt">reg</span> <span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span> <span class="n">r_in_data</span><span class="p">;</span>
</span><span class='line'>  
</span><span class='line'><span class="k">always</span> <span class="p">@</span> <span class="p">(</span><span class="k">negedge</span> <span class="n">i_ale</span><span class="p">)</span>
</span><span class='line'>    <span class="k">begin</span>
</span><span class='line'>        <span class="n">r_al</span> <span class="o">&lt;=</span> <span class="n">io_ad</span><span class="p">;</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="k">assign</span> <span class="n">w_addr</span><span class="p">[</span><span class="mh">15</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="n">i_ah</span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">],</span> <span class="n">r_al</span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]};</span>
</span><span class='line'><span class="k">assign</span> <span class="n">io_ad</span> <span class="o">=</span> <span class="p">(</span><span class="o">~</span><span class="n">i_rd</span><span class="p">)</span> <span class="o">?</span> <span class="n">r_in_data</span> <span class="o">:</span> <span class="mh">8</span><span class="p">&#39;</span><span class="n">hzz</span><span class="p">;</span>
</span><span class='line'><span class="k">assign</span> <span class="n">w_out_data</span> <span class="o">=</span> <span class="n">io_ad</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="k">always</span> <span class="p">@</span> <span class="p">(</span><span class="k">negedge</span> <span class="n">i_wr</span><span class="p">)</span>
</span><span class='line'>    <span class="k">begin</span>
</span><span class='line'>        <span class="k">if</span> <span class="p">(</span><span class="n">w_addr</span> <span class="o">==</span> <span class="mh">16&#39;h0001</span><span class="p">)</span>
</span><span class='line'>            <span class="k">begin</span>
</span><span class='line'>                <span class="n">o_led</span> <span class="o">&lt;=</span> <span class="n">w_out_data</span><span class="p">;</span>
</span><span class='line'>            <span class="k">end</span>
</span><span class='line'>        <span class="cm">/*</span>
</span><span class='line'><span class="cm">        else</span>
</span><span class='line'><span class="cm">            begin</span>
</span><span class='line'><span class="cm">                o_led &lt;= 8&#39;hff;</span>
</span><span class='line'><span class="cm">            end</span>
</span><span class='line'><span class="cm">        */</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="k">always</span> <span class="p">@</span> <span class="p">(</span><span class="cm">/*negedge i_rd*/</span><span class="n">i_key</span> <span class="k">or</span> <span class="n">w_addr</span><span class="p">)</span>
</span><span class='line'>    <span class="k">begin</span>
</span><span class='line'>        <span class="k">if</span> <span class="p">(</span><span class="n">w_addr</span> <span class="o">==</span> <span class="mh">16&#39;h0002</span><span class="p">)</span>
</span><span class='line'>            <span class="k">begin</span>
</span><span class='line'>                <span class="n">r_in_data</span> <span class="o">&lt;=</span> <span class="n">i_key</span><span class="p">;</span>
</span><span class='line'>            <span class="k">end</span>
</span><span class='line'>        <span class="k">else</span>
</span><span class='line'>            <span class="k">begin</span>
</span><span class='line'>                <span class="n">r_in_data</span> <span class="o">&lt;=</span> <span class="mh">8</span><span class="p">&#39;</span><span class="n">hzz</span><span class="p">;</span>
</span><span class='line'>            <span class="k">end</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="k">endmodule</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Tcl</h3>

<p>第一次用Tcl来配置引脚，没想到这么简单。</p>

<figure class='code'><figcaption><span> (bus_expand.tcl)</span> <a href='http://postget.me/downloads/code/bus_expand/bus_expand.tcl'>download</a></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
</pre></td><td class='code'><pre><code class='tcl'><span class='line'><span class="nv">set_location_assignment</span> PIN_109 <span class="o">-</span>to io_ad<span class="k">[</span><span class="nv">0</span><span class="k">]</span>
</span><span class='line'><span class="nv">set_location_assignment</span> PIN_108 <span class="o">-</span>to io_ad<span class="k">[</span><span class="nv">1</span><span class="k">]</span>
</span><span class='line'><span class="nv">set_location_assignment</span> PIN_111 <span class="o">-</span>to io_ad<span class="k">[</span><span class="nv">2</span><span class="k">]</span>
</span><span class='line'><span class="nv">set_location_assignment</span> PIN_113 <span class="o">-</span>to io_ad<span class="k">[</span><span class="nv">3</span><span class="k">]</span>
</span><span class='line'><span class="nv">set_location_assignment</span> PIN_114 <span class="o">-</span>to io_ad<span class="k">[</span><span class="nv">4</span><span class="k">]</span>
</span><span class='line'><span class="nv">set_location_assignment</span> PIN_117 <span class="o">-</span>to io_ad<span class="k">[</span><span class="nv">5</span><span class="k">]</span>
</span><span class='line'><span class="nv">set_location_assignment</span> PIN_119 <span class="o">-</span>to io_ad<span class="k">[</span><span class="nv">6</span><span class="k">]</span>
</span><span class='line'><span class="nv">set_location_assignment</span> PIN_120 <span class="o">-</span>to io_ad<span class="k">[</span><span class="nv">7</span><span class="k">]</span>
</span><span class='line'>
</span><span class='line'><span class="nv">set_location_assignment</span> PIN_134 <span class="o">-</span>to i_ah<span class="k">[</span><span class="nv">0</span><span class="k">]</span>
</span><span class='line'><span class="nv">set_location_assignment</span> PIN_133 <span class="o">-</span>to i_ah<span class="k">[</span><span class="nv">1</span><span class="k">]</span>
</span><span class='line'><span class="nv">set_location_assignment</span> PIN_124 <span class="o">-</span>to i_ah<span class="k">[</span><span class="nv">2</span><span class="k">]</span>
</span><span class='line'><span class="nv">set_location_assignment</span> PIN_123 <span class="o">-</span>to i_ah<span class="k">[</span><span class="nv">3</span><span class="k">]</span>
</span><span class='line'><span class="nv">set_location_assignment</span> PIN_121 <span class="o">-</span>to i_ah<span class="k">[</span><span class="nv">4</span><span class="k">]</span>
</span><span class='line'><span class="nv">set_location_assignment</span> PIN_125 <span class="o">-</span>to i_ah<span class="k">[</span><span class="nv">5</span><span class="k">]</span>
</span><span class='line'><span class="nv">set_location_assignment</span> PIN_131 <span class="o">-</span>to i_ah<span class="k">[</span><span class="nv">6</span><span class="k">]</span>
</span><span class='line'><span class="nv">set_location_assignment</span> PIN_132 <span class="o">-</span>to i_ah<span class="k">[</span><span class="nv">7</span><span class="k">]</span>
</span><span class='line'>
</span><span class='line'><span class="nv">set_location_assignment</span> PIN_105 <span class="o">-</span>to i_wr
</span><span class='line'><span class="nv">set_location_assignment</span> PIN_104 <span class="o">-</span>to i_rd
</span><span class='line'><span class="nv">set_location_assignment</span> PIN_107 <span class="o">-</span>to i_ale
</span><span class='line'>
</span><span class='line'><span class="nv">set_location_assignment</span> PIN_71 <span class="o">-</span>to i_key<span class="k">[</span><span class="nv">0</span><span class="k">]</span>
</span><span class='line'><span class="nv">set_location_assignment</span> PIN_69 <span class="o">-</span>to i_key<span class="k">[</span><span class="nv">1</span><span class="k">]</span>
</span><span class='line'><span class="nv">set_location_assignment</span> PIN_68 <span class="o">-</span>to i_key<span class="k">[</span><span class="nv">2</span><span class="k">]</span>
</span><span class='line'><span class="nv">set_location_assignment</span> PIN_67 <span class="o">-</span>to i_key<span class="k">[</span><span class="nv">3</span><span class="k">]</span>
</span><span class='line'><span class="nv">set_location_assignment</span> PIN_63 <span class="o">-</span>to i_key<span class="k">[</span><span class="nv">4</span><span class="k">]</span>
</span><span class='line'><span class="nv">set_location_assignment</span> PIN_62 <span class="o">-</span>to i_key<span class="k">[</span><span class="nv">5</span><span class="k">]</span>
</span><span class='line'><span class="nv">set_location_assignment</span> PIN_61 <span class="o">-</span>to i_key<span class="k">[</span><span class="nv">6</span><span class="k">]</span>
</span><span class='line'><span class="nv">set_location_assignment</span> PIN_60 <span class="o">-</span>to i_key<span class="k">[</span><span class="nv">7</span><span class="k">]</span>
</span><span class='line'>
</span><span class='line'><span class="nv">set_location_assignment</span> PIN_55 <span class="o">-</span>to o_led<span class="k">[</span><span class="nv">0</span><span class="k">]</span>
</span><span class='line'><span class="nv">set_location_assignment</span> PIN_52 <span class="o">-</span>to o_led<span class="k">[</span><span class="nv">1</span><span class="k">]</span>
</span><span class='line'><span class="nv">set_location_assignment</span> PIN_49 <span class="o">-</span>to o_led<span class="k">[</span><span class="nv">2</span><span class="k">]</span>
</span><span class='line'><span class="nv">set_location_assignment</span> PIN_45 <span class="o">-</span>to o_led<span class="k">[</span><span class="nv">3</span><span class="k">]</span>
</span><span class='line'><span class="nv">set_location_assignment</span> PIN_43 <span class="o">-</span>to o_led<span class="k">[</span><span class="nv">4</span><span class="k">]</span>
</span><span class='line'><span class="nv">set_location_assignment</span> PIN_38 <span class="o">-</span>to o_led<span class="k">[</span><span class="nv">5</span><span class="k">]</span>
</span><span class='line'><span class="nv">set_location_assignment</span> PIN_53 <span class="o">-</span>to o_led<span class="k">[</span><span class="nv">6</span><span class="k">]</span>
</span><span class='line'><span class="nv">set_location_assignment</span> PIN_51 <span class="o">-</span>to o_led<span class="k">[</span><span class="nv">7</span><span class="k">]</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Rtl</h3>

<p>看到Rtl才发现其实真的很简单。
<img src="https://dl.dropboxusercontent.com/u/128996895/Blog/bus_expand/bus_expand_rtl.png" alt="image" /></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[分频器总结]]></title>
    <link href="http://postget.me/blog/2013/08/11/divider/"/>
    <updated>2013-08-11T15:17:00+08:00</updated>
    <id>http://postget.me/blog/2013/08/11/divider</id>
    <content type="html"><![CDATA[<h2>索引</h2>

<ul>
<li><a href="#divider_1">D触发器2分频</a></li>
<li><a href="#divider_2">计数器2分频</a></li>
<li><a href="#divider_3">D触发器4分频</a></li>
<li><a href="#divider_4">计数器4分频</a></li>
<li><a href="#divider_5">计数器6分频写法1</a></li>
<li><a href="#divider_6">计数器6分频写法2</a></li>
<li><a href="#divider_7">非等占空比3分频</a></li>
<li><a href="#divider_8">等占空比3分频</a></li>
</ul>


<h2 id="divider_1">D触发器2分频</h2>


<h3>Verilog</h3>

<figure class='code'><figcaption><span> (divider_1.v)</span> <a href='http://postget.me/downloads/code/divider/divider_1.v'>download</a></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='v'><span class='line'><span class="k">module</span> <span class="n">divider_1</span> <span class="p">(</span><span class="n">i_clk</span><span class="p">,</span> <span class="n">i_rst_n</span><span class="p">,</span> <span class="n">o_div_clk</span><span class="p">);</span>
</span><span class='line'>    <span class="k">input</span> <span class="n">i_clk</span><span class="p">;</span>
</span><span class='line'>    <span class="k">input</span> <span class="n">i_rst_n</span><span class="p">;</span>
</span><span class='line'>    <span class="k">output</span> <span class="kt">reg</span> <span class="n">o_div_clk</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">always</span> <span class="p">@</span> <span class="p">(</span><span class="k">posedge</span> <span class="n">i_clk</span> <span class="k">or</span> <span class="k">negedge</span> <span class="n">i_rst_n</span><span class="p">)</span>
</span><span class='line'>        <span class="k">begin</span>
</span><span class='line'>            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">i_rst_n</span><span class="p">)</span>
</span><span class='line'>                <span class="n">o_div_clk</span> <span class="o">&lt;=</span> <span class="mh">0</span><span class="p">;</span>
</span><span class='line'>            <span class="k">else</span>
</span><span class='line'>                <span class="n">o_div_clk</span> <span class="o">&lt;=</span> <span class="o">~</span><span class="n">o_div_clk</span><span class="p">;</span>
</span><span class='line'>        <span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="k">endmodule</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Rtl</h3>

<p><img src="https://dl.dropboxusercontent.com/u/128996895/Blog/%E5%88%86%E9%A2%91%E5%99%A8/divider_1_rtl.png" alt="image" /></p>

<h3>Simulation</h3>

<p><img src="https://dl.dropboxusercontent.com/u/128996895/Blog/%E5%88%86%E9%A2%91%E5%99%A8/divider_1_simulation.png" alt="image" /></p>

<h2 id="divider_2">计数器2分频</h2>


<h3>Verilog</h3>

<figure class='code'><figcaption><span> (divider_2.v)</span> <a href='http://postget.me/downloads/code/divider/divider_2.v'>download</a></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class='v'><span class='line'><span class="k">module</span> <span class="n">divider_2</span> <span class="p">(</span><span class="n">i_clk</span><span class="p">,</span> <span class="n">i_rst_n</span><span class="p">,</span> <span class="n">o_div_clk</span><span class="p">);</span>
</span><span class='line'>    <span class="k">input</span> <span class="n">i_clk</span><span class="p">;</span>
</span><span class='line'>    <span class="k">input</span> <span class="n">i_rst_n</span><span class="p">;</span>
</span><span class='line'>    <span class="k">output</span> <span class="n">o_div_clk</span><span class="p">;</span>
</span><span class='line'>    <span class="kt">reg</span> <span class="n">r_cnt</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">always</span> <span class="p">@</span> <span class="p">(</span><span class="k">posedge</span> <span class="n">i_clk</span> <span class="k">or</span> <span class="k">negedge</span> <span class="n">i_rst_n</span><span class="p">)</span>
</span><span class='line'>        <span class="k">begin</span>
</span><span class='line'>            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">i_rst_n</span><span class="p">)</span>
</span><span class='line'>                <span class="n">r_cnt</span> <span class="o">&lt;=</span> <span class="mh">0</span><span class="p">;</span>
</span><span class='line'>            <span class="k">else</span>
</span><span class='line'>                <span class="n">r_cnt</span> <span class="o">&lt;=</span> <span class="n">r_cnt</span> <span class="o">+</span> <span class="mh">1&#39;b1</span><span class="p">;</span>
</span><span class='line'>        <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">assign</span> <span class="n">o_div_clk</span> <span class="o">=</span> <span class="n">r_cnt</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="k">endmodule</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Rtl</h3>

<p><img src="https://dl.dropboxusercontent.com/u/128996895/Blog/%E5%88%86%E9%A2%91%E5%99%A8/divider_2_rtl.png" alt="image" /></p>

<h3>Simulation</h3>

<p><img src="https://dl.dropboxusercontent.com/u/128996895/Blog/%E5%88%86%E9%A2%91%E5%99%A8/divider_2_simulation.png" alt="image" /></p>

<h2 id="divider_3">D触发器4分频</h2>


<h3>Verilog</h3>

<figure class='code'><figcaption><span> (divider_3.v)</span> <a href='http://postget.me/downloads/code/divider/divider_3.v'>download</a></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
</pre></td><td class='code'><pre><code class='v'><span class='line'><span class="k">module</span> <span class="n">divider_3</span> <span class="p">(</span><span class="n">i_clk</span><span class="p">,</span> <span class="n">i_rst_n</span><span class="p">,</span> <span class="n">o_div_clk</span><span class="p">);</span>
</span><span class='line'>    <span class="k">input</span> <span class="n">i_clk</span><span class="p">;</span>
</span><span class='line'>    <span class="k">input</span> <span class="n">i_rst_n</span><span class="p">;</span>
</span><span class='line'>    <span class="k">output</span> <span class="kt">reg</span> <span class="n">o_div_clk</span><span class="p">;</span>
</span><span class='line'>    <span class="kt">reg</span> <span class="n">r_temp_clk</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">always</span> <span class="p">@</span> <span class="p">(</span><span class="k">posedge</span> <span class="n">i_clk</span> <span class="k">or</span> <span class="k">negedge</span> <span class="n">i_rst_n</span><span class="p">)</span>
</span><span class='line'>        <span class="k">begin</span>
</span><span class='line'>            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">i_rst_n</span><span class="p">)</span>
</span><span class='line'>                <span class="k">begin</span>
</span><span class='line'>                    <span class="n">o_div_clk</span> <span class="o">&lt;=</span> <span class="mh">0</span><span class="p">;</span>
</span><span class='line'>                    <span class="n">r_temp_clk</span> <span class="o">&lt;=</span> <span class="mh">0</span><span class="p">;</span>
</span><span class='line'>                <span class="k">end</span>
</span><span class='line'>            <span class="k">else</span>
</span><span class='line'>                <span class="k">begin</span>
</span><span class='line'>                    <span class="n">o_div_clk</span> <span class="o">&lt;=</span> <span class="n">r_temp_clk</span><span class="p">;</span>
</span><span class='line'>                    <span class="n">r_temp_clk</span> <span class="o">&lt;=</span> <span class="o">~</span><span class="n">o_div_clk</span><span class="p">;</span>
</span><span class='line'>                <span class="k">end</span>
</span><span class='line'>        <span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="k">endmodule</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Rtl</h3>

<p><img src="https://dl.dropboxusercontent.com/u/128996895/Blog/%E5%88%86%E9%A2%91%E5%99%A8/divider_3_rtl.png" alt="image" /></p>

<h3>Simulation</h3>

<p><img src="https://dl.dropboxusercontent.com/u/128996895/Blog/%E5%88%86%E9%A2%91%E5%99%A8/divider_3_simulation.png" alt="image" /></p>

<h2 id="divider_4">计数器4分频</h2>


<h3>Verilog</h3>

<figure class='code'><figcaption><span> (divider_4.v)</span> <a href='http://postget.me/downloads/code/divider/divider_4.v'>download</a></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class='v'><span class='line'><span class="k">module</span> <span class="n">divider_4</span> <span class="p">(</span><span class="n">i_clk</span><span class="p">,</span> <span class="n">i_rst_n</span><span class="p">,</span> <span class="n">o_div_clk</span><span class="p">);</span>
</span><span class='line'>    <span class="k">input</span> <span class="n">i_clk</span><span class="p">;</span>
</span><span class='line'>    <span class="k">input</span> <span class="n">i_rst_n</span><span class="p">;</span>
</span><span class='line'>    <span class="k">output</span> <span class="n">o_div_clk</span><span class="p">;</span>
</span><span class='line'>    <span class="kt">reg</span> <span class="p">[</span><span class="mh">1</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span> <span class="n">r_cnt</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">always</span> <span class="p">@</span> <span class="p">(</span><span class="k">posedge</span> <span class="n">i_clk</span> <span class="k">or</span> <span class="k">negedge</span> <span class="n">i_rst_n</span><span class="p">)</span>
</span><span class='line'>        <span class="k">begin</span>
</span><span class='line'>            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">i_rst_n</span><span class="p">)</span>
</span><span class='line'>                <span class="n">r_cnt</span> <span class="o">&lt;=</span> <span class="mh">0</span><span class="p">;</span>
</span><span class='line'>            <span class="k">else</span>
</span><span class='line'>                <span class="n">r_cnt</span> <span class="o">&lt;=</span> <span class="n">r_cnt</span> <span class="o">+</span> <span class="mh">1&#39;b1</span><span class="p">;</span>
</span><span class='line'>        <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">assign</span> <span class="n">o_div_clk</span> <span class="o">=</span> <span class="n">r_cnt</span><span class="p">[</span><span class="mh">1</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'><span class="k">endmodule</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Rtl</h3>

<p><img src="https://dl.dropboxusercontent.com/u/128996895/Blog/%E5%88%86%E9%A2%91%E5%99%A8/divider_4_rtl.png" alt="image" /></p>

<h3>Simulation</h3>

<p><img src="https://dl.dropboxusercontent.com/u/128996895/Blog/%E5%88%86%E9%A2%91%E5%99%A8/divider_4_simulation.png" alt="image" /></p>

<h2 id="divider_5">计数器6分频写法1</h2>


<h3>Verilog</h3>

<figure class='code'><figcaption><span> (divider_5.v)</span> <a href='http://postget.me/downloads/code/divider/divider_5.v'>download</a></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
</pre></td><td class='code'><pre><code class='v'><span class='line'><span class="k">module</span> <span class="n">divider_5</span> <span class="p">(</span><span class="n">i_clk</span><span class="p">,</span> <span class="n">i_rst_n</span><span class="p">,</span> <span class="n">o_div_clk</span><span class="p">);</span>
</span><span class='line'>    <span class="k">input</span> <span class="n">i_clk</span><span class="p">;</span>
</span><span class='line'>    <span class="k">input</span> <span class="n">i_rst_n</span><span class="p">;</span>
</span><span class='line'>    <span class="k">output</span> <span class="kt">reg</span> <span class="n">o_div_clk</span><span class="p">;</span>
</span><span class='line'>    <span class="kt">reg</span> <span class="p">[</span><span class="mh">1</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span> <span class="n">r_cnt</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">always</span> <span class="p">@</span> <span class="p">(</span><span class="k">posedge</span> <span class="n">i_clk</span> <span class="k">or</span> <span class="k">negedge</span> <span class="n">i_rst_n</span><span class="p">)</span>
</span><span class='line'>        <span class="k">begin</span>
</span><span class='line'>            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">i_rst_n</span><span class="p">)</span>
</span><span class='line'>                <span class="k">begin</span>
</span><span class='line'>                    <span class="n">o_div_clk</span> <span class="o">&lt;=</span> <span class="mh">0</span><span class="p">;</span>
</span><span class='line'>                    <span class="n">r_cnt</span> <span class="o">&lt;=</span> <span class="mh">0</span><span class="p">;</span>
</span><span class='line'>                <span class="k">end</span>
</span><span class='line'>            <span class="k">else</span>
</span><span class='line'>                <span class="k">begin</span>
</span><span class='line'>                    <span class="k">if</span> <span class="p">(</span><span class="n">r_cnt</span> <span class="o">&lt;</span> <span class="mh">2</span><span class="p">)</span>
</span><span class='line'>                        <span class="n">r_cnt</span> <span class="o">&lt;=</span> <span class="n">r_cnt</span> <span class="o">+</span> <span class="mh">1&#39;b1</span><span class="p">;</span>
</span><span class='line'>                    <span class="k">else</span>
</span><span class='line'>                        <span class="k">begin</span>
</span><span class='line'>                            <span class="n">o_div_clk</span> <span class="o">&lt;=</span> <span class="o">~</span><span class="n">o_div_clk</span><span class="p">;</span>
</span><span class='line'>                            <span class="n">r_cnt</span> <span class="o">&lt;=</span> <span class="mh">0</span><span class="p">;</span>
</span><span class='line'>                        <span class="k">end</span>
</span><span class='line'>                <span class="k">end</span>
</span><span class='line'>        <span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="k">endmodule</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Rtl</h3>

<p><img src="https://dl.dropboxusercontent.com/u/128996895/Blog/%E5%88%86%E9%A2%91%E5%99%A8/divider_5_rtl.png" alt="image" /></p>

<h3>Simulation</h3>

<p><img src="https://dl.dropboxusercontent.com/u/128996895/Blog/%E5%88%86%E9%A2%91%E5%99%A8/divider_5_simulation.png" alt="image" /></p>

<h2 id="divider_6">计数器6分频写法2</h2>


<h3>Verilog</h3>

<figure class='code'><figcaption><span> (divider_6.v)</span> <a href='http://postget.me/downloads/code/divider/divider_6.v'>download</a></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
</pre></td><td class='code'><pre><code class='v'><span class='line'><span class="k">module</span> <span class="n">divider_6</span> <span class="p">(</span><span class="n">i_clk</span><span class="p">,</span> <span class="n">i_rst_n</span><span class="p">,</span> <span class="n">o_div_clk</span><span class="p">);</span>
</span><span class='line'>    <span class="k">input</span> <span class="n">i_clk</span><span class="p">;</span>
</span><span class='line'>    <span class="k">input</span> <span class="n">i_rst_n</span><span class="p">;</span>
</span><span class='line'>    <span class="k">output</span> <span class="kt">reg</span> <span class="n">o_div_clk</span><span class="p">;</span>
</span><span class='line'>    <span class="kt">reg</span> <span class="p">[</span><span class="mh">2</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span> <span class="n">r_cnt</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">always</span> <span class="p">@</span> <span class="p">(</span><span class="k">posedge</span> <span class="n">i_clk</span> <span class="k">or</span> <span class="k">negedge</span> <span class="n">i_rst_n</span><span class="p">)</span>
</span><span class='line'>        <span class="k">begin</span>
</span><span class='line'>            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">i_rst_n</span><span class="p">)</span>
</span><span class='line'>                <span class="n">r_cnt</span> <span class="o">&lt;=</span> <span class="mh">0</span><span class="p">;</span>
</span><span class='line'>            <span class="k">else</span>
</span><span class='line'>                <span class="k">if</span> <span class="p">(</span><span class="n">r_cnt</span> <span class="o">==</span> <span class="mh">5</span><span class="p">)</span>
</span><span class='line'>                    <span class="n">r_cnt</span> <span class="o">&lt;=</span> <span class="mh">0</span><span class="p">;</span>
</span><span class='line'>                <span class="k">else</span>
</span><span class='line'>                    <span class="n">r_cnt</span> <span class="o">&lt;=</span> <span class="n">r_cnt</span> <span class="o">+</span> <span class="mh">1&#39;b1</span><span class="p">;</span>
</span><span class='line'>        <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">always</span> <span class="p">@</span> <span class="p">(</span><span class="k">posedge</span> <span class="n">i_clk</span> <span class="k">or</span> <span class="k">negedge</span> <span class="n">i_rst_n</span><span class="p">)</span>
</span><span class='line'>        <span class="k">begin</span>
</span><span class='line'>            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">i_rst_n</span><span class="p">)</span>
</span><span class='line'>                <span class="n">o_div_clk</span> <span class="o">&lt;=</span> <span class="mh">0</span><span class="p">;</span>
</span><span class='line'>            <span class="k">else</span>
</span><span class='line'>                <span class="k">if</span> <span class="p">(</span><span class="n">r_cnt</span> <span class="o">&lt;=</span> <span class="mh">2</span><span class="p">)</span>
</span><span class='line'>                    <span class="n">o_div_clk</span> <span class="o">&lt;=</span> <span class="mh">1</span><span class="p">;</span>
</span><span class='line'>                <span class="k">else</span>
</span><span class='line'>                    <span class="n">o_div_clk</span> <span class="o">&lt;=</span> <span class="mh">0</span><span class="p">;</span>
</span><span class='line'>        <span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="k">endmodule</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Rtl</h3>

<p><img src="https://dl.dropboxusercontent.com/u/128996895/Blog/%E5%88%86%E9%A2%91%E5%99%A8/divider_6_rtl.png" alt="image" /></p>

<h3>Simulation</h3>

<p><img src="https://dl.dropboxusercontent.com/u/128996895/Blog/%E5%88%86%E9%A2%91%E5%99%A8/divider_6_simulation.png" alt="image" /></p>

<h2 id="divider_7">非等占空比3分频</h2>


<h3>Verilog</h3>

<figure class='code'><figcaption><span> (divider_7.v)</span> <a href='http://postget.me/downloads/code/divider/divider_7.v'>download</a></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
</pre></td><td class='code'><pre><code class='v'><span class='line'><span class="k">module</span> <span class="n">divider_7</span> <span class="p">(</span><span class="n">i_clk</span><span class="p">,</span> <span class="n">i_rst_n</span><span class="p">,</span> <span class="n">o_div_clk</span><span class="p">);</span>
</span><span class='line'>    <span class="k">input</span> <span class="n">i_clk</span><span class="p">;</span>
</span><span class='line'>    <span class="k">input</span> <span class="n">i_rst_n</span><span class="p">;</span>
</span><span class='line'>    <span class="k">output</span> <span class="kt">reg</span> <span class="n">o_div_clk</span><span class="p">;</span>
</span><span class='line'>    <span class="kt">reg</span> <span class="p">[</span><span class="mh">1</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span> <span class="n">r_cnt</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">always</span> <span class="p">@</span> <span class="p">(</span><span class="k">posedge</span> <span class="n">i_clk</span> <span class="k">or</span> <span class="k">negedge</span> <span class="n">i_rst_n</span><span class="p">)</span>
</span><span class='line'>        <span class="k">begin</span>
</span><span class='line'>            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">i_rst_n</span><span class="p">)</span>
</span><span class='line'>                <span class="n">r_cnt</span> <span class="o">&lt;=</span> <span class="mh">0</span><span class="p">;</span>
</span><span class='line'>            <span class="k">else</span>
</span><span class='line'>                <span class="k">if</span> <span class="p">(</span><span class="n">r_cnt</span> <span class="o">==</span> <span class="mh">2</span><span class="p">)</span>
</span><span class='line'>                    <span class="n">r_cnt</span> <span class="o">&lt;=</span> <span class="mh">0</span><span class="p">;</span>
</span><span class='line'>                <span class="k">else</span>
</span><span class='line'>                    <span class="n">r_cnt</span> <span class="o">&lt;=</span> <span class="n">r_cnt</span> <span class="o">+</span> <span class="mh">1&#39;b1</span><span class="p">;</span>
</span><span class='line'>        <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">always</span> <span class="p">@</span> <span class="p">(</span><span class="k">posedge</span> <span class="n">i_clk</span> <span class="k">or</span> <span class="k">negedge</span> <span class="n">i_rst_n</span><span class="p">)</span>
</span><span class='line'>        <span class="k">begin</span>
</span><span class='line'>            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">i_rst_n</span><span class="p">)</span>
</span><span class='line'>                <span class="n">o_div_clk</span> <span class="o">&lt;=</span> <span class="mh">0</span><span class="p">;</span>
</span><span class='line'>            <span class="k">else</span>
</span><span class='line'>                <span class="k">if</span> <span class="p">(</span><span class="n">r_cnt</span> <span class="o">&lt;=</span> <span class="mh">1</span><span class="p">)</span>
</span><span class='line'>                    <span class="n">o_div_clk</span> <span class="o">&lt;=</span> <span class="mh">0</span><span class="p">;</span>
</span><span class='line'>                <span class="k">else</span>
</span><span class='line'>                    <span class="n">o_div_clk</span> <span class="o">&lt;=</span> <span class="mh">1</span><span class="p">;</span>
</span><span class='line'>        <span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="k">endmodule</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Rtl</h3>

<p><img src="https://dl.dropboxusercontent.com/u/128996895/Blog/%E5%88%86%E9%A2%91%E5%99%A8/divider_7_rtl.png" alt="image" /></p>

<h3>Simulation</h3>

<p><img src="https://dl.dropboxusercontent.com/u/128996895/Blog/%E5%88%86%E9%A2%91%E5%99%A8/divider_7_simulation.png" alt="image" /></p>

<h2 id="divider_8">等占空比3分频</h2>


<h3>Verilog</h3>

<figure class='code'><figcaption><span> (divider_8.v)</span> <a href='http://postget.me/downloads/code/divider/divider_8.v'>download</a></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
</pre></td><td class='code'><pre><code class='v'><span class='line'><span class="k">module</span> <span class="n">divider_8</span> <span class="p">(</span><span class="n">i_clk</span><span class="p">,</span> <span class="n">i_rst_n</span><span class="p">,</span> <span class="n">o_div_clk</span><span class="p">);</span>
</span><span class='line'>    <span class="k">input</span> <span class="n">i_clk</span><span class="p">;</span>
</span><span class='line'>    <span class="k">input</span> <span class="n">i_rst_n</span><span class="p">;</span>
</span><span class='line'>    <span class="k">output</span> <span class="n">o_div_clk</span><span class="p">;</span>
</span><span class='line'>    <span class="kt">reg</span> <span class="p">[</span><span class="mh">1</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span> <span class="n">r_cnt1</span><span class="p">,</span> <span class="n">r_cnt2</span><span class="p">;</span>   <span class="c1">//change registers width when K changed </span>
</span><span class='line'>    <span class="kt">reg</span> <span class="n">r_clk1</span><span class="p">,</span> <span class="n">r_clk2</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">//3=2K+1,K=1</span>
</span><span class='line'>    <span class="k">parameter</span> <span class="no">K</span> <span class="o">=</span> <span class="mh">1</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">//posedge</span>
</span><span class='line'>    <span class="k">always</span> <span class="p">@</span> <span class="p">(</span><span class="k">posedge</span> <span class="n">i_clk</span> <span class="k">or</span> <span class="k">negedge</span> <span class="n">i_rst_n</span><span class="p">)</span>
</span><span class='line'>        <span class="k">begin</span>
</span><span class='line'>            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">i_rst_n</span><span class="p">)</span>
</span><span class='line'>              <span class="n">r_cnt1</span> <span class="o">&lt;=</span> <span class="mh">0</span><span class="p">;</span>
</span><span class='line'>            <span class="k">else</span>
</span><span class='line'>                <span class="k">if</span> <span class="p">(</span><span class="n">r_cnt1</span> <span class="o">==</span> <span class="mh">2</span> <span class="o">*</span> <span class="no">K</span><span class="p">)</span>
</span><span class='line'>                    <span class="n">r_cnt1</span> <span class="o">&lt;=</span> <span class="mh">0</span><span class="p">;</span>
</span><span class='line'>                <span class="k">else</span>
</span><span class='line'>                    <span class="n">r_cnt1</span> <span class="o">&lt;=</span> <span class="n">r_cnt1</span> <span class="o">+</span> <span class="mh">1&#39;b1</span><span class="p">;</span>
</span><span class='line'>        <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">always</span> <span class="p">@</span> <span class="p">(</span><span class="k">posedge</span> <span class="n">i_clk</span> <span class="k">or</span> <span class="k">negedge</span> <span class="n">i_rst_n</span><span class="p">)</span>
</span><span class='line'>        <span class="k">begin</span>
</span><span class='line'>            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">i_rst_n</span><span class="p">)</span>
</span><span class='line'>                <span class="n">r_clk1</span> <span class="o">&lt;=</span> <span class="mh">0</span><span class="p">;</span>
</span><span class='line'>            <span class="k">else</span>
</span><span class='line'>                <span class="k">if</span> <span class="p">(</span><span class="n">r_cnt1</span> <span class="o">==</span> <span class="no">K</span> <span class="o">-</span> <span class="mh">1</span><span class="p">)</span>
</span><span class='line'>                    <span class="n">r_clk1</span> <span class="o">&lt;=</span> <span class="mh">1</span><span class="p">;</span>
</span><span class='line'>                <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">r_cnt1</span> <span class="o">==</span> <span class="mh">2</span> <span class="o">*</span> <span class="no">K</span><span class="p">)</span>
</span><span class='line'>                    <span class="n">r_clk1</span> <span class="o">&lt;=</span> <span class="mh">0</span><span class="p">;</span>
</span><span class='line'>        <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">//negedge</span>
</span><span class='line'>    <span class="k">always</span> <span class="p">@</span> <span class="p">(</span><span class="k">negedge</span> <span class="n">i_clk</span> <span class="k">or</span> <span class="k">negedge</span> <span class="n">i_rst_n</span><span class="p">)</span>
</span><span class='line'>        <span class="k">begin</span>
</span><span class='line'>            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">i_rst_n</span><span class="p">)</span>
</span><span class='line'>              <span class="n">r_cnt2</span> <span class="o">&lt;=</span> <span class="mh">0</span><span class="p">;</span>
</span><span class='line'>            <span class="k">else</span>
</span><span class='line'>              <span class="k">if</span> <span class="p">(</span><span class="n">r_cnt2</span> <span class="o">==</span> <span class="mh">2</span> <span class="o">*</span> <span class="no">K</span><span class="p">)</span>
</span><span class='line'>                <span class="n">r_cnt2</span> <span class="o">&lt;=</span> <span class="mh">0</span><span class="p">;</span>
</span><span class='line'>              <span class="k">else</span>
</span><span class='line'>                <span class="n">r_cnt2</span> <span class="o">&lt;=</span> <span class="n">r_cnt2</span> <span class="o">+</span> <span class="mh">1&#39;b1</span><span class="p">;</span>
</span><span class='line'>        <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">always</span> <span class="p">@</span> <span class="p">(</span><span class="k">negedge</span> <span class="n">i_clk</span> <span class="k">or</span> <span class="k">negedge</span> <span class="n">i_rst_n</span><span class="p">)</span>
</span><span class='line'>        <span class="k">begin</span>
</span><span class='line'>            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">i_rst_n</span><span class="p">)</span>
</span><span class='line'>              <span class="n">r_clk2</span> <span class="o">&lt;=</span> <span class="mh">0</span><span class="p">;</span>
</span><span class='line'>            <span class="k">else</span>
</span><span class='line'>                <span class="k">if</span> <span class="p">(</span><span class="n">r_cnt2</span> <span class="o">==</span> <span class="no">K</span> <span class="o">-</span> <span class="mh">1</span><span class="p">)</span>
</span><span class='line'>                    <span class="n">r_clk2</span> <span class="o">&lt;=</span> <span class="mh">1</span><span class="p">;</span>
</span><span class='line'>                <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">r_cnt2</span> <span class="o">==</span> <span class="mh">2</span> <span class="o">*</span> <span class="no">K</span><span class="p">)</span>
</span><span class='line'>                    <span class="n">r_clk2</span> <span class="o">&lt;=</span> <span class="mh">0</span><span class="p">;</span>
</span><span class='line'>        <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">assign</span> <span class="n">o_div_clk</span> <span class="o">=</span> <span class="n">r_clk1</span> <span class="o">&amp;</span> <span class="n">r_clk2</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="k">endmodule</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Rtl</h3>

<p><img src="https://dl.dropboxusercontent.com/u/128996895/Blog/%E5%88%86%E9%A2%91%E5%99%A8/divider_8_rtl.png" alt="image" /></p>

<h3>Simulation</h3>

<p><img src="https://dl.dropboxusercontent.com/u/128996895/Blog/%E5%88%86%E9%A2%91%E5%99%A8/divider_8_simulation.png" alt="image" /></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[38译码器的15种写法]]></title>
    <link href="http://postget.me/blog/2013/08/04/decoder38/"/>
    <updated>2013-08-04T21:30:00+08:00</updated>
    <id>http://postget.me/blog/2013/08/04/decoder38</id>
    <content type="html"><![CDATA[<blockquote><p>本文我不断变换写法来实现一个38译码器，目的只是想通过此过程来快速的学习Verilog语法要点。为了实现更多的写法变化以及覆盖更多的Verilog语法要点，我给通常的38译码器增加了一个`i_opt`信号用来控制输出是否反转。这些写法都是可综合的，并且通过了开发板验证。</p></blockquote>


<h2>索引</h2>

<ul>
<li><a href="#decoder38_1">标准写法</a></li>
<li><a href="#decoder38_2">两个always</a></li>
<li><a href="#decoder38_3">一个always搞定</a></li>
<li><a href="#decoder38_4">改成if else</a></li>
<li><a href="#decoder38_5">只用assign</a></li>
<li><a href="#decoder38_6">for循环1</a></li>
<li><a href="#decoder38_7">for循环2</a></li>
<li><a href="#decoder38_8">两行代码搞定</a></li>
<li><a href="#decoder38_9">一行代码搞定</a></li>
<li><a href="#decoder38_10">调用function</a></li>
<li><a href="#decoder38_11">调用task</a></li>
<li><a href="#decoder38_12">调用module</a></li>
<li><a href="#decoder38_13">原理图方式</a></li>
<li><a href="#decoder38_14">真值表描述</a></li>
<li><a href="#decoder38_15">门级描述</a></li>
</ul>


<h2 id="decoder38_1">标准写法</h2>


<h3>Verilog</h3>

<figure class='code'><figcaption><span> (decoder38_1.v)</span> <a href='http://postget.me/downloads/code/decoder38/decoder38_1.v'>download</a></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
</pre></td><td class='code'><pre><code class='v'><span class='line'><span class="k">module</span> <span class="n">decoder38_1</span> <span class="p">(</span><span class="n">i_sel</span><span class="p">,</span> <span class="n">i_opt</span><span class="p">,</span> <span class="n">o_y</span><span class="p">);</span>
</span><span class='line'>    <span class="k">input</span> <span class="p">[</span><span class="mh">2</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span> <span class="n">i_sel</span><span class="p">;</span>
</span><span class='line'>    <span class="k">input</span> <span class="n">i_opt</span><span class="p">;</span>
</span><span class='line'>    <span class="k">output</span> <span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span> <span class="n">o_y</span><span class="p">;</span>
</span><span class='line'>    <span class="kt">reg</span> <span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span> <span class="n">r_y</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">always</span> <span class="p">@</span> <span class="p">(</span><span class="n">i_sel</span><span class="p">)</span>
</span><span class='line'>        <span class="k">begin</span>
</span><span class='line'>            <span class="k">case</span> <span class="p">(</span><span class="n">i_sel</span><span class="p">)</span>
</span><span class='line'>                <span class="mh">3&#39;b000</span><span class="o">:</span> <span class="n">r_y</span> <span class="o">=</span> <span class="mh">8&#39;b11111110</span><span class="p">;</span>
</span><span class='line'>                <span class="mh">3&#39;b001</span><span class="o">:</span> <span class="n">r_y</span> <span class="o">=</span> <span class="mh">8&#39;b11111101</span><span class="p">;</span>
</span><span class='line'>                <span class="mh">3&#39;b010</span><span class="o">:</span> <span class="n">r_y</span> <span class="o">=</span> <span class="mh">8&#39;b11111011</span><span class="p">;</span>
</span><span class='line'>                <span class="mh">3&#39;b011</span><span class="o">:</span> <span class="n">r_y</span> <span class="o">=</span> <span class="mh">8&#39;b11110111</span><span class="p">;</span>
</span><span class='line'>                <span class="mh">3&#39;b100</span><span class="o">:</span> <span class="n">r_y</span> <span class="o">=</span> <span class="mh">8&#39;b11101111</span><span class="p">;</span>
</span><span class='line'>                <span class="mh">3&#39;b101</span><span class="o">:</span> <span class="n">r_y</span> <span class="o">=</span> <span class="mh">8&#39;b11011111</span><span class="p">;</span>
</span><span class='line'>                <span class="mh">3&#39;b110</span><span class="o">:</span> <span class="n">r_y</span> <span class="o">=</span> <span class="mh">8&#39;b10111111</span><span class="p">;</span>
</span><span class='line'>                <span class="mh">3&#39;b111</span><span class="o">:</span> <span class="n">r_y</span> <span class="o">=</span> <span class="mh">8&#39;b01111111</span><span class="p">;</span>
</span><span class='line'>                <span class="k">default</span><span class="o">:</span> <span class="n">r_y</span> <span class="o">=</span> <span class="mh">8&#39;b11111111</span><span class="p">;</span>
</span><span class='line'>            <span class="k">endcase</span>
</span><span class='line'>        <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">assign</span> <span class="n">o_y</span> <span class="o">=</span> <span class="p">(</span><span class="n">i_opt</span> <span class="o">==</span> <span class="mh">1&#39;b1</span><span class="p">)</span> <span class="o">?</span> <span class="o">~</span><span class="n">r_y</span> <span class="o">:</span> <span class="n">r_y</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="k">endmodule</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Rtl</h3>

<p><img src="https://dl.dropboxusercontent.com/u/128996895/Blog/38%E8%AF%91%E7%A0%81%E5%99%A8/decoder_1_rtl.png" alt="image" /></p>

<h3>Simulation</h3>

<p><img src="https://dl.dropboxusercontent.com/u/128996895/Blog/38%E8%AF%91%E7%A0%81%E5%99%A8/decoder_simulation.png" alt="image" /></p>

<h2 id="decoder38_2">两个always</h2>


<h3>Verilog</h3>

<figure class='code'><figcaption><span> (decoder38_2.v)</span> <a href='http://postget.me/downloads/code/decoder38/decoder38_2.v'>download</a></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
</pre></td><td class='code'><pre><code class='v'><span class='line'><span class="k">module</span> <span class="n">decoder38_2</span> <span class="p">(</span><span class="n">i_sel</span><span class="p">,</span> <span class="n">i_opt</span><span class="p">,</span> <span class="n">o_y</span><span class="p">);</span>
</span><span class='line'>    <span class="k">input</span> <span class="p">[</span><span class="mh">2</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span> <span class="n">i_sel</span><span class="p">;</span>
</span><span class='line'>    <span class="k">input</span> <span class="n">i_opt</span><span class="p">;</span>
</span><span class='line'>    <span class="k">output</span> <span class="kt">reg</span> <span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span> <span class="n">o_y</span><span class="p">;</span>
</span><span class='line'>    <span class="kt">reg</span> <span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span> <span class="n">r_y</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">always</span> <span class="p">@</span> <span class="p">(</span><span class="n">i_sel</span> <span class="k">or</span> <span class="n">i_opt</span><span class="p">)</span>
</span><span class='line'>        <span class="k">begin</span>
</span><span class='line'>            <span class="k">case</span> <span class="p">(</span><span class="n">i_sel</span><span class="p">)</span>
</span><span class='line'>                <span class="mh">3</span><span class="mi">&#39;d0</span><span class="o">:</span> <span class="n">r_y</span> <span class="o">=</span> <span class="mh">8&#39;b1111</span><span class="n">_1110</span><span class="p">;</span>
</span><span class='line'>                <span class="mh">3</span><span class="mi">&#39;d1</span><span class="o">:</span> <span class="n">r_y</span> <span class="o">=</span> <span class="mh">8&#39;b1111</span><span class="n">_1101</span><span class="p">;</span>
</span><span class='line'>                <span class="mh">3</span><span class="mi">&#39;d2</span><span class="o">:</span> <span class="n">r_y</span> <span class="o">=</span> <span class="mh">8&#39;b1111</span><span class="n">_1011</span><span class="p">;</span>
</span><span class='line'>                <span class="mh">3</span><span class="mi">&#39;d3</span><span class="o">:</span> <span class="n">r_y</span> <span class="o">=</span> <span class="mh">8&#39;b1111</span><span class="n">_0111</span><span class="p">;</span>
</span><span class='line'>                <span class="mh">3</span><span class="mi">&#39;d4</span><span class="o">:</span> <span class="n">r_y</span> <span class="o">=</span> <span class="mh">8&#39;b1110</span><span class="n">_1111</span><span class="p">;</span>
</span><span class='line'>                <span class="mh">3</span><span class="mi">&#39;d5</span><span class="o">:</span> <span class="n">r_y</span> <span class="o">=</span> <span class="mh">8&#39;b1101</span><span class="n">_1111</span><span class="p">;</span>
</span><span class='line'>                <span class="mh">3</span><span class="mi">&#39;d6</span><span class="o">:</span> <span class="n">r_y</span> <span class="o">=</span> <span class="mh">8&#39;b1011</span><span class="n">_1111</span><span class="p">;</span>
</span><span class='line'>                <span class="mh">3</span><span class="mi">&#39;d7</span><span class="o">:</span> <span class="n">r_y</span> <span class="o">=</span> <span class="mh">8&#39;b0111</span><span class="n">_1111</span><span class="p">;</span>
</span><span class='line'>                <span class="k">default</span><span class="o">:</span> <span class="n">r_y</span> <span class="o">=</span> <span class="mh">8&#39;hff</span><span class="p">;</span>
</span><span class='line'>            <span class="k">endcase</span>
</span><span class='line'>        <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">always</span> <span class="p">@</span> <span class="p">(</span><span class="n">i_opt</span> <span class="k">or</span> <span class="n">r_y</span><span class="p">)</span>
</span><span class='line'>        <span class="k">begin</span>
</span><span class='line'>            <span class="k">if</span> <span class="p">(</span><span class="n">i_opt</span> <span class="o">==</span> <span class="mh">1&#39;b1</span><span class="p">)</span>
</span><span class='line'>                <span class="n">o_y</span> <span class="o">=</span> <span class="o">~</span><span class="n">r_y</span><span class="p">;</span>
</span><span class='line'>            <span class="k">else</span>
</span><span class='line'>                <span class="n">o_y</span> <span class="o">=</span> <span class="n">r_y</span><span class="p">;</span>
</span><span class='line'>        <span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="k">endmodule</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Rtl</h3>

<p>同上</p>

<h2 id="decoder38_3">一个always搞定</h2>


<h3>Verilog</h3>

<figure class='code'><figcaption><span> (decoder38_3.v)</span> <a href='http://postget.me/downloads/code/decoder38/decoder38_3.v'>download</a></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
</pre></td><td class='code'><pre><code class='v'><span class='line'><span class="k">module</span> <span class="n">decoder38_3</span> <span class="p">(</span><span class="n">i_sel</span><span class="p">,</span> <span class="n">i_opt</span><span class="p">,</span> <span class="n">o_y</span><span class="p">);</span>
</span><span class='line'>    <span class="k">input</span> <span class="p">[</span><span class="mh">2</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span> <span class="n">i_sel</span><span class="p">;</span>
</span><span class='line'>    <span class="k">input</span> <span class="n">i_opt</span><span class="p">;</span>
</span><span class='line'>    <span class="k">output</span> <span class="kt">reg</span> <span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span> <span class="n">o_y</span><span class="p">;</span>
</span><span class='line'>    <span class="kt">reg</span> <span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span> <span class="n">r_y</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">always</span> <span class="p">@</span> <span class="p">(</span><span class="n">i_sel</span> <span class="k">or</span> <span class="n">i_opt</span><span class="p">)</span>
</span><span class='line'>        <span class="k">begin</span>
</span><span class='line'>            <span class="k">case</span> <span class="p">(</span><span class="n">i_sel</span><span class="p">)</span>
</span><span class='line'>                <span class="mh">3</span><span class="mi">&#39;d0</span><span class="o">:</span> <span class="n">r_y</span> <span class="o">=</span> <span class="mh">8&#39;b1111</span><span class="n">_1110</span><span class="p">;</span>
</span><span class='line'>                <span class="mh">3</span><span class="mi">&#39;d1</span><span class="o">:</span> <span class="n">r_y</span> <span class="o">=</span> <span class="mh">8&#39;b1111</span><span class="n">_1101</span><span class="p">;</span>
</span><span class='line'>                <span class="mh">3</span><span class="mi">&#39;d2</span><span class="o">:</span> <span class="n">r_y</span> <span class="o">=</span> <span class="mh">8&#39;b1111</span><span class="n">_1011</span><span class="p">;</span>
</span><span class='line'>                <span class="mh">3</span><span class="mi">&#39;d3</span><span class="o">:</span> <span class="n">r_y</span> <span class="o">=</span> <span class="mh">8&#39;b1111</span><span class="n">_0111</span><span class="p">;</span>
</span><span class='line'>                <span class="mh">3</span><span class="mi">&#39;d4</span><span class="o">:</span> <span class="n">r_y</span> <span class="o">=</span> <span class="mh">8&#39;b1110</span><span class="n">_1111</span><span class="p">;</span>
</span><span class='line'>                <span class="mh">3</span><span class="mi">&#39;d5</span><span class="o">:</span> <span class="n">r_y</span> <span class="o">=</span> <span class="mh">8&#39;b1101</span><span class="n">_1111</span><span class="p">;</span>
</span><span class='line'>                <span class="mh">3</span><span class="mi">&#39;d6</span><span class="o">:</span> <span class="n">r_y</span> <span class="o">=</span> <span class="mh">8&#39;b1011</span><span class="n">_1111</span><span class="p">;</span>
</span><span class='line'>                <span class="mh">3</span><span class="mi">&#39;d7</span><span class="o">:</span> <span class="n">r_y</span> <span class="o">=</span> <span class="mh">8&#39;b0111</span><span class="n">_1111</span><span class="p">;</span>
</span><span class='line'>                <span class="k">default</span><span class="o">:</span> <span class="n">r_y</span> <span class="o">=</span> <span class="mh">8&#39;hff</span><span class="p">;</span>
</span><span class='line'>            <span class="k">endcase</span>
</span><span class='line'>
</span><span class='line'>            <span class="k">if</span> <span class="p">(</span><span class="n">i_opt</span> <span class="o">==</span> <span class="mh">1&#39;b1</span><span class="p">)</span>
</span><span class='line'>                <span class="n">o_y</span> <span class="o">=</span> <span class="o">~</span><span class="n">r_y</span><span class="p">;</span>
</span><span class='line'>            <span class="k">else</span>
</span><span class='line'>                <span class="n">o_y</span> <span class="o">=</span> <span class="n">r_y</span><span class="p">;</span>
</span><span class='line'>        <span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="k">endmodule</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Rtl</h3>

<p>同上</p>

<h2 id="decoder38_4">改成if else</h2>


<h3>Verilog</h3>

<figure class='code'><figcaption><span> (decoder38_4.v)</span> <a href='http://postget.me/downloads/code/decoder38/decoder38_4.v'>download</a></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
</pre></td><td class='code'><pre><code class='v'><span class='line'><span class="k">module</span> <span class="n">decoder38_4</span> <span class="p">(</span><span class="n">i_sel</span><span class="p">,</span> <span class="n">i_opt</span><span class="p">,</span> <span class="n">o_y</span><span class="p">);</span>
</span><span class='line'>    <span class="k">input</span> <span class="p">[</span><span class="mh">2</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span> <span class="n">i_sel</span><span class="p">;</span>
</span><span class='line'>    <span class="k">input</span> <span class="n">i_opt</span><span class="p">;</span>
</span><span class='line'>    <span class="k">output</span> <span class="kt">reg</span> <span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span> <span class="n">o_y</span><span class="p">;</span>
</span><span class='line'>    <span class="kt">reg</span> <span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span> <span class="n">r_y</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">always</span> <span class="p">@</span> <span class="p">(</span><span class="n">i_sel</span> <span class="k">or</span> <span class="n">i_opt</span><span class="p">)</span>
</span><span class='line'>        <span class="k">begin</span>
</span><span class='line'>            <span class="k">if</span> <span class="p">(</span><span class="n">i_sel</span> <span class="o">==</span> <span class="mh">3</span><span class="mi">&#39;d0</span><span class="p">)</span>
</span><span class='line'>                <span class="n">r_y</span> <span class="o">=</span> <span class="mh">8&#39;b1111</span><span class="n">_1110</span><span class="p">;</span>
</span><span class='line'>            <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">i_sel</span> <span class="o">==</span> <span class="mh">3</span><span class="mi">&#39;d1</span><span class="p">)</span>
</span><span class='line'>                <span class="n">r_y</span> <span class="o">=</span> <span class="mh">8&#39;b1111</span><span class="n">_1101</span><span class="p">;</span>
</span><span class='line'>            <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">i_sel</span> <span class="o">==</span> <span class="mh">3</span><span class="mi">&#39;d2</span><span class="p">)</span>
</span><span class='line'>                <span class="n">r_y</span> <span class="o">=</span> <span class="mh">8&#39;b1111</span><span class="n">_1011</span><span class="p">;</span>
</span><span class='line'>            <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">i_sel</span> <span class="o">==</span> <span class="mh">3</span><span class="mi">&#39;d3</span><span class="p">)</span>
</span><span class='line'>                <span class="n">r_y</span> <span class="o">=</span> <span class="mh">8&#39;b1111</span><span class="n">_0111</span><span class="p">;</span>
</span><span class='line'>            <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">i_sel</span> <span class="o">==</span> <span class="mh">3</span><span class="mi">&#39;d4</span><span class="p">)</span>
</span><span class='line'>                <span class="n">r_y</span> <span class="o">=</span> <span class="mh">8&#39;b1110</span><span class="n">_1111</span><span class="p">;</span>
</span><span class='line'>            <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">i_sel</span> <span class="o">==</span> <span class="mh">3</span><span class="mi">&#39;d5</span><span class="p">)</span>
</span><span class='line'>                <span class="n">r_y</span> <span class="o">=</span> <span class="mh">8&#39;b1101</span><span class="n">_1111</span><span class="p">;</span>
</span><span class='line'>            <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">i_sel</span> <span class="o">==</span> <span class="mh">3</span><span class="mi">&#39;d6</span><span class="p">)</span>
</span><span class='line'>                <span class="n">r_y</span> <span class="o">=</span> <span class="mh">8&#39;b1011</span><span class="n">_1111</span><span class="p">;</span>
</span><span class='line'>            <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">i_sel</span> <span class="o">==</span> <span class="mh">3</span><span class="mi">&#39;d7</span><span class="p">)</span>
</span><span class='line'>                <span class="n">r_y</span> <span class="o">=</span> <span class="mh">8&#39;b0111</span><span class="n">_1111</span><span class="p">;</span>
</span><span class='line'>            <span class="k">else</span>
</span><span class='line'>                <span class="n">r_y</span> <span class="o">=</span> <span class="mh">8&#39;hff</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>            <span class="k">if</span> <span class="p">(</span><span class="n">i_opt</span> <span class="o">==</span> <span class="mh">1&#39;b1</span><span class="p">)</span>
</span><span class='line'>                <span class="n">o_y</span> <span class="o">=</span> <span class="o">~</span><span class="n">r_y</span><span class="p">;</span>
</span><span class='line'>            <span class="k">else</span>
</span><span class='line'>                <span class="n">o_y</span> <span class="o">=</span> <span class="n">r_y</span><span class="p">;</span>
</span><span class='line'>        <span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="k">endmodule</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Rtl</h3>

<p><img src="https://dl.dropboxusercontent.com/u/128996895/Blog/38%E8%AF%91%E7%A0%81%E5%99%A8/decoder_4_rtl.png" alt="image" /></p>

<h2 id="decoder38_5">只用assign</h2>


<h3>Verilog</h3>

<figure class='code'><figcaption><span> (decoder38_5.v)</span> <a href='http://postget.me/downloads/code/decoder38/decoder38_5.v'>download</a></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class='v'><span class='line'><span class="k">module</span> <span class="n">decoder38_5</span> <span class="p">(</span><span class="n">i_sel</span><span class="p">,</span> <span class="n">i_opt</span><span class="p">,</span> <span class="n">o_y</span><span class="p">);</span>
</span><span class='line'>    <span class="k">input</span> <span class="p">[</span><span class="mh">2</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span> <span class="n">i_sel</span><span class="p">;</span>
</span><span class='line'>    <span class="k">input</span> <span class="n">i_opt</span><span class="p">;</span>
</span><span class='line'>    <span class="k">output</span> <span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span> <span class="n">o_y</span><span class="p">;</span>
</span><span class='line'>    <span class="kt">wire</span> <span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span> <span class="n">w_y</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">assign</span> <span class="n">w_y</span> <span class="o">=</span> <span class="p">(</span><span class="n">i_sel</span> <span class="o">==</span> <span class="mh">3</span><span class="mi">&#39;d0</span><span class="p">)</span> <span class="o">?</span> <span class="mh">8&#39;b1111</span><span class="n">_1110</span> <span class="o">:</span>
</span><span class='line'>                 <span class="p">(</span><span class="n">i_sel</span> <span class="o">==</span> <span class="mh">3</span><span class="mi">&#39;d1</span><span class="p">)</span> <span class="o">?</span> <span class="mh">8&#39;b1111</span><span class="n">_1101</span> <span class="o">:</span>
</span><span class='line'>                 <span class="p">(</span><span class="n">i_sel</span> <span class="o">==</span> <span class="mh">3</span><span class="mi">&#39;d2</span><span class="p">)</span> <span class="o">?</span> <span class="mh">8&#39;b1111</span><span class="n">_1011</span> <span class="o">:</span>
</span><span class='line'>                 <span class="p">(</span><span class="n">i_sel</span> <span class="o">==</span> <span class="mh">3</span><span class="mi">&#39;d3</span><span class="p">)</span> <span class="o">?</span> <span class="mh">8&#39;b1111</span><span class="n">_0111</span> <span class="o">:</span>
</span><span class='line'>                 <span class="p">(</span><span class="n">i_sel</span> <span class="o">==</span> <span class="mh">3</span><span class="mi">&#39;d4</span><span class="p">)</span> <span class="o">?</span> <span class="mh">8&#39;b1110</span><span class="n">_1111</span> <span class="o">:</span>
</span><span class='line'>                 <span class="p">(</span><span class="n">i_sel</span> <span class="o">==</span> <span class="mh">3</span><span class="mi">&#39;d5</span><span class="p">)</span> <span class="o">?</span> <span class="mh">8&#39;b1101</span><span class="n">_1111</span> <span class="o">:</span>
</span><span class='line'>                 <span class="p">(</span><span class="n">i_sel</span> <span class="o">==</span> <span class="mh">3</span><span class="mi">&#39;d6</span><span class="p">)</span> <span class="o">?</span> <span class="mh">8&#39;b1011</span><span class="n">_1111</span> <span class="o">:</span>
</span><span class='line'>                 <span class="p">(</span><span class="n">i_sel</span> <span class="o">==</span> <span class="mh">3</span><span class="mi">&#39;d7</span><span class="p">)</span> <span class="o">?</span> <span class="mh">8&#39;b0111</span><span class="n">_1111</span> <span class="o">:</span>
</span><span class='line'>                 <span class="mh">8&#39;b1111</span><span class="n">_1111</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">assign</span> <span class="n">o_y</span> <span class="o">=</span> <span class="p">(</span><span class="n">i_opt</span> <span class="o">==</span> <span class="mh">1&#39;b1</span><span class="p">)</span> <span class="o">?</span> <span class="o">~</span><span class="n">w_y</span> <span class="o">:</span> <span class="n">w_y</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="k">endmodule</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Rtl</h3>

<p>同上</p>

<h2 id="decoder38_6">for循环1</h2>


<p>一直以为for循环是不可综合的，事实并非如此。不过，从Rtl中可以看到，for循环使用了8个32位宽的寄存器，比较浪费资源。</p>

<h3>Verilog</h3>

<figure class='code'><figcaption><span> (decoder38_6.v)</span> <a href='http://postget.me/downloads/code/decoder38/decoder38_6.v'>download</a></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
</pre></td><td class='code'><pre><code class='v'><span class='line'><span class="k">module</span> <span class="n">decoder38_6</span> <span class="p">(</span><span class="n">i_sel</span><span class="p">,</span> <span class="n">i_opt</span><span class="p">,</span> <span class="n">o_y</span><span class="p">);</span>
</span><span class='line'>    <span class="k">input</span> <span class="p">[</span><span class="mh">2</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span> <span class="n">i_sel</span><span class="p">;</span>
</span><span class='line'>    <span class="k">input</span> <span class="n">i_opt</span><span class="p">;</span>
</span><span class='line'>    <span class="k">output</span> <span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span> <span class="n">o_y</span><span class="p">;</span>
</span><span class='line'>    <span class="kt">reg</span> <span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span> <span class="n">r_y</span><span class="p">;</span>
</span><span class='line'>    <span class="k">integer</span> <span class="n">i</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">always</span> <span class="p">@</span> <span class="p">(</span><span class="n">i_sel</span><span class="p">)</span>
</span><span class='line'>        <span class="k">begin</span>
</span><span class='line'>            <span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mh">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mh">8</span><span class="p">;</span> <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mh">1</span><span class="p">)</span>
</span><span class='line'>                <span class="k">begin</span>
</span><span class='line'>                    <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">==</span> <span class="n">i_sel</span><span class="p">)</span>
</span><span class='line'>                        <span class="n">r_y</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0</span><span class="p">;</span>
</span><span class='line'>                    <span class="k">else</span>
</span><span class='line'>                        <span class="n">r_y</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mh">1</span><span class="p">;</span>
</span><span class='line'>                <span class="k">end</span>
</span><span class='line'>        <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">assign</span> <span class="n">o_y</span> <span class="o">=</span> <span class="p">(</span><span class="n">i_opt</span> <span class="o">==</span> <span class="mh">1&#39;b1</span><span class="p">)</span> <span class="o">?</span> <span class="o">~</span><span class="n">r_y</span> <span class="o">:</span> <span class="n">r_y</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="k">endmodule</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Rtl</h3>

<p><img src="https://dl.dropboxusercontent.com/u/128996895/Blog/38%E8%AF%91%E7%A0%81%E5%99%A8/decoder_6_rtl.png" alt="image" /></p>

<h2 id="decoder38_7">for循环2</h2>


<h3>Verilog</h3>

<figure class='code'><figcaption><span> (decoder38_7.v)</span> <a href='http://postget.me/downloads/code/decoder38/decoder38_7.v'>download</a></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
</pre></td><td class='code'><pre><code class='v'><span class='line'><span class="k">module</span> <span class="n">decoder38_7</span> <span class="p">(</span><span class="n">i_sel</span><span class="p">,</span> <span class="n">i_opt</span><span class="p">,</span> <span class="n">o_y</span><span class="p">);</span>
</span><span class='line'>    <span class="k">input</span> <span class="p">[</span><span class="mh">2</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span> <span class="n">i_sel</span><span class="p">;</span>
</span><span class='line'>    <span class="k">input</span> <span class="n">i_opt</span><span class="p">;</span>
</span><span class='line'>    <span class="k">output</span> <span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span> <span class="n">o_y</span><span class="p">;</span>
</span><span class='line'>    <span class="kt">reg</span> <span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span> <span class="n">r_y</span><span class="p">;</span>
</span><span class='line'>    <span class="k">integer</span> <span class="n">i</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">always</span> <span class="p">@</span> <span class="p">(</span><span class="n">i_sel</span><span class="p">)</span>
</span><span class='line'>        <span class="k">begin</span>
</span><span class='line'>            <span class="n">r_y</span> <span class="o">=</span> <span class="mh">8&#39;hff</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>            <span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mh">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mh">8</span><span class="p">;</span> <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mh">1</span><span class="p">)</span>
</span><span class='line'>                <span class="k">begin</span>
</span><span class='line'>                    <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">==</span> <span class="n">i_sel</span><span class="p">)</span>
</span><span class='line'>                        <span class="n">r_y</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0</span><span class="p">;</span>
</span><span class='line'>                <span class="k">end</span>
</span><span class='line'>        <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">assign</span> <span class="n">o_y</span> <span class="o">=</span> <span class="p">(</span><span class="n">i_opt</span> <span class="o">==</span> <span class="mh">1&#39;b1</span><span class="p">)</span> <span class="o">?</span> <span class="o">~</span><span class="n">r_y</span> <span class="o">:</span> <span class="n">r_y</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="k">endmodule</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Rtl</h3>

<p>同上</p>

<h2 id="decoder38_8">两行代码搞定</h2>


<p>这个例子使用了移位操作，使得代码长度明显缩短了。从Rtl看，生成了硬件移位器，我一开始还不知道FPGA内部有硬件移位器这种资源，查了一下资料，说FPGA内部是可以通过RAM块生成移位器的，接着我将器件换成MAXII系列EPLD来编译，奇怪的是，同样还是生成了移位器，可是MAXII系列器件内部是没有RAM资源的，我想也许是生成了桶型移位器吧，后来我也没有深究了。不知道这种写法可不可取？</p>

<h3>Verilog</h3>

<figure class='code'><figcaption><span> (decoder38_8.v)</span> <a href='http://postget.me/downloads/code/decoder38/decoder38_8.v'>download</a></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='v'><span class='line'><span class="k">module</span> <span class="n">decoder38_8</span> <span class="p">(</span><span class="n">i_sel</span><span class="p">,</span> <span class="n">i_opt</span><span class="p">,</span> <span class="n">o_y</span><span class="p">);</span>
</span><span class='line'>    <span class="k">input</span> <span class="p">[</span><span class="mh">2</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span> <span class="n">i_sel</span><span class="p">;</span>
</span><span class='line'>    <span class="k">input</span> <span class="n">i_opt</span><span class="p">;</span>
</span><span class='line'>    <span class="k">output</span> <span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span> <span class="n">o_y</span><span class="p">;</span>
</span><span class='line'>    <span class="kt">wire</span> <span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span> <span class="n">w_y</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">assign</span> <span class="n">w_y</span> <span class="o">=</span> <span class="o">~</span><span class="p">(</span><span class="mh">8</span><span class="mi">&#39;d1</span> <span class="o">&lt;&lt;</span> <span class="n">i_sel</span><span class="p">);</span>
</span><span class='line'>    <span class="k">assign</span> <span class="n">o_y</span> <span class="o">=</span> <span class="p">(</span><span class="n">i_opt</span> <span class="o">==</span> <span class="mh">1&#39;b1</span><span class="p">)</span> <span class="o">?</span> <span class="o">~</span><span class="n">w_y</span> <span class="o">:</span> <span class="n">w_y</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="k">endmodule</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Rtl</h3>

<p><img src="https://dl.dropboxusercontent.com/u/128996895/Blog/38%E8%AF%91%E7%A0%81%E5%99%A8/decoder_8_rtl.png" alt="image" /></p>

<h2 id="decoder38_9">一行代码搞定</h2>


<h3>Verilog</h3>

<figure class='code'><figcaption><span> (decoder38_9.v)</span> <a href='http://postget.me/downloads/code/decoder38/decoder38_9.v'>download</a></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='v'><span class='line'><span class="k">module</span> <span class="n">decoder38_9</span> <span class="p">(</span><span class="n">i_sel</span><span class="p">,</span> <span class="n">i_opt</span><span class="p">,</span> <span class="n">o_y</span><span class="p">);</span>
</span><span class='line'>    <span class="k">input</span> <span class="p">[</span><span class="mh">2</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span> <span class="n">i_sel</span><span class="p">;</span>
</span><span class='line'>    <span class="k">input</span> <span class="n">i_opt</span><span class="p">;</span>
</span><span class='line'>    <span class="k">output</span> <span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span> <span class="n">o_y</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">assign</span> <span class="n">o_y</span> <span class="o">=</span> <span class="p">(</span><span class="n">i_opt</span> <span class="o">==</span> <span class="mh">1&#39;b1</span><span class="p">)</span> <span class="o">?</span> <span class="o">~</span><span class="p">(</span><span class="mh">8</span><span class="mi">&#39;d1</span> <span class="o">&lt;&lt;</span> <span class="n">i_sel</span><span class="p">)</span> <span class="o">:</span> <span class="p">(</span><span class="mh">8</span><span class="mi">&#39;d1</span> <span class="o">&lt;&lt;</span> <span class="n">i_sel</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="k">endmodule</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Rtl</h3>

<p>同上</p>

<h2 id="decoder38_10">调用function</h2>


<h3>Verilog</h3>

<figure class='code'><figcaption><span> (decoder38_10.v)</span> <a href='http://postget.me/downloads/code/decoder38/decoder38_10.v'>download</a></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
</pre></td><td class='code'><pre><code class='v'><span class='line'><span class="k">module</span> <span class="n">decoder38_10</span> <span class="p">(</span><span class="n">i_sel</span><span class="p">,</span> <span class="n">i_opt</span><span class="p">,</span> <span class="n">o_y</span><span class="p">);</span>
</span><span class='line'>    <span class="k">input</span> <span class="p">[</span><span class="mh">2</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span> <span class="n">i_sel</span><span class="p">;</span>
</span><span class='line'>    <span class="k">input</span> <span class="n">i_opt</span><span class="p">;</span>
</span><span class='line'>    <span class="k">output</span> <span class="kt">reg</span> <span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span> <span class="n">o_y</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">always</span> <span class="p">@</span> <span class="p">(</span><span class="n">i_sel</span> <span class="k">or</span> <span class="n">i_opt</span><span class="p">)</span>
</span><span class='line'>        <span class="k">begin</span>
</span><span class='line'>            <span class="k">if</span> <span class="p">(</span><span class="n">i_opt</span> <span class="o">==</span> <span class="mh">1&#39;b1</span><span class="p">)</span>
</span><span class='line'>                <span class="n">o_y</span> <span class="o">=</span> <span class="o">~</span><span class="n">base_decoder38</span> <span class="p">(</span><span class="n">i_sel</span><span class="p">);</span>
</span><span class='line'>            <span class="k">else</span>
</span><span class='line'>                <span class="n">o_y</span> <span class="o">=</span> <span class="n">base_decoder38</span> <span class="p">(</span><span class="n">i_sel</span><span class="p">);</span>
</span><span class='line'>        <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">function</span> <span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span> <span class="n">base_decoder38</span><span class="p">;</span>
</span><span class='line'>        <span class="k">input</span> <span class="p">[</span><span class="mh">2</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span> <span class="n">i_sel</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">begin</span>
</span><span class='line'>            <span class="n">base_decoder38</span> <span class="o">=</span> <span class="o">~</span><span class="p">(</span><span class="mh">8</span><span class="mi">&#39;d1</span> <span class="o">&lt;&lt;</span> <span class="n">i_sel</span><span class="p">);</span>
</span><span class='line'>        <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">endfunction</span>
</span><span class='line'>
</span><span class='line'><span class="k">endmodule</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Rtl</h3>

<p>同上</p>

<h2 id="decoder38_11">调用task</h2>


<h3>Verilog</h3>

<figure class='code'><figcaption><span> (decoder38_11.v)</span> <a href='http://postget.me/downloads/code/decoder38/decoder38_11.v'>download</a></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
</pre></td><td class='code'><pre><code class='v'><span class='line'><span class="k">module</span> <span class="n">decoder38_11</span> <span class="p">(</span><span class="n">i_sel</span><span class="p">,</span> <span class="n">i_opt</span><span class="p">,</span> <span class="n">o_y</span><span class="p">);</span>
</span><span class='line'>    <span class="k">input</span> <span class="p">[</span><span class="mh">2</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span> <span class="n">i_sel</span><span class="p">;</span>
</span><span class='line'>    <span class="k">input</span> <span class="n">i_opt</span><span class="p">;</span>
</span><span class='line'>    <span class="k">output</span> <span class="kt">reg</span> <span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span> <span class="n">o_y</span><span class="p">;</span>
</span><span class='line'>    <span class="kt">reg</span> <span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span> <span class="n">r_y</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">always</span> <span class="p">@</span> <span class="p">(</span><span class="n">i_sel</span> <span class="k">or</span> <span class="n">i_opt</span><span class="p">)</span>
</span><span class='line'>        <span class="k">begin</span>
</span><span class='line'>            <span class="n">base_decoder38</span> <span class="p">(</span><span class="n">i_sel</span><span class="p">,</span> <span class="n">r_y</span><span class="p">);</span>
</span><span class='line'>            <span class="n">o_y</span> <span class="o">=</span> <span class="p">(</span><span class="n">i_opt</span> <span class="o">==</span> <span class="mh">1</span><span class="p">)</span> <span class="o">?</span> <span class="o">~</span><span class="n">r_y</span> <span class="o">:</span> <span class="n">r_y</span><span class="p">;</span>
</span><span class='line'>        <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">task</span> <span class="n">base_decoder38</span><span class="p">;</span>
</span><span class='line'>        <span class="k">input</span> <span class="p">[</span><span class="mh">2</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span> <span class="n">i_sel</span><span class="p">;</span>
</span><span class='line'>        <span class="k">output</span> <span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span> <span class="n">o_y</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">begin</span>
</span><span class='line'>            <span class="n">o_y</span> <span class="o">=</span> <span class="o">~</span><span class="p">(</span><span class="mh">8</span><span class="mi">&#39;d1</span> <span class="o">&lt;&lt;</span> <span class="n">i_sel</span><span class="p">);</span>
</span><span class='line'>        <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">endtask</span>
</span><span class='line'>
</span><span class='line'><span class="k">endmodule</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Rtl</h3>

<p>同上</p>

<h2 id="decoder38_12">调用module</h2>


<h3>Verilog</h3>

<figure class='code'><figcaption><span> (decoder38_12.v)</span> <a href='http://postget.me/downloads/code/decoder38/decoder38_12.v'>download</a></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='v'><span class='line'><span class="k">module</span> <span class="n">decoder38_12</span> <span class="p">(</span><span class="n">i_sel</span><span class="p">,</span> <span class="n">i_opt</span><span class="p">,</span> <span class="n">o_y</span><span class="p">);</span>
</span><span class='line'>    <span class="k">input</span> <span class="p">[</span><span class="mh">2</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span> <span class="n">i_sel</span><span class="p">;</span>
</span><span class='line'>    <span class="k">input</span> <span class="n">i_opt</span><span class="p">;</span>
</span><span class='line'>    <span class="k">output</span> <span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span> <span class="n">o_y</span><span class="p">;</span>
</span><span class='line'>    <span class="kt">wire</span> <span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span> <span class="n">w_y</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">assign</span> <span class="n">o_y</span> <span class="o">=</span> <span class="p">(</span><span class="n">i_opt</span> <span class="o">==</span> <span class="mh">1&#39;b1</span><span class="p">)</span> <span class="o">?</span> <span class="o">~</span><span class="n">w_y</span> <span class="o">:</span> <span class="n">w_y</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">decoder38_12_base</span> <span class="n">decoder38_12_base_entity</span> <span class="p">(.</span><span class="n">i_sel</span> <span class="p">(</span><span class="n">i_sel</span><span class="p">),</span> <span class="p">.</span><span class="n">o_y</span> <span class="p">(</span><span class="n">w_y</span><span class="p">));</span>
</span><span class='line'>
</span><span class='line'><span class="k">endmodule</span>
</span></code></pre></td></tr></table></div></figure>


<figure class='code'><figcaption><span> (decoder38_12_base.v)</span> <a href='http://postget.me/downloads/code/decoder38/decoder38_12_base.v'>download</a></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class='v'><span class='line'><span class="k">module</span> <span class="n">decoder38_12_base</span> <span class="p">(</span><span class="n">i_sel</span><span class="p">,</span> <span class="n">o_y</span><span class="p">);</span>
</span><span class='line'>    <span class="k">input</span> <span class="p">[</span><span class="mh">2</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span> <span class="n">i_sel</span><span class="p">;</span>
</span><span class='line'>    <span class="k">output</span> <span class="kt">reg</span> <span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span> <span class="n">o_y</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">always</span> <span class="p">@</span> <span class="p">(</span><span class="n">i_sel</span><span class="p">)</span>
</span><span class='line'>        <span class="k">begin</span>
</span><span class='line'>            <span class="k">case</span> <span class="p">(</span><span class="n">i_sel</span><span class="p">)</span>
</span><span class='line'>                <span class="mh">3</span><span class="mi">&#39;d0</span><span class="o">:</span> <span class="n">o_y</span> <span class="o">=</span> <span class="mh">8&#39;b1111</span><span class="n">_1110</span><span class="p">;</span>
</span><span class='line'>                <span class="mh">3</span><span class="mi">&#39;d1</span><span class="o">:</span> <span class="n">o_y</span> <span class="o">=</span> <span class="mh">8&#39;b1111</span><span class="n">_1101</span><span class="p">;</span>
</span><span class='line'>                <span class="mh">3</span><span class="mi">&#39;d2</span><span class="o">:</span> <span class="n">o_y</span> <span class="o">=</span> <span class="mh">8&#39;b1111</span><span class="n">_1011</span><span class="p">;</span>
</span><span class='line'>                <span class="mh">3</span><span class="mi">&#39;d3</span><span class="o">:</span> <span class="n">o_y</span> <span class="o">=</span> <span class="mh">8&#39;b1111</span><span class="n">_0111</span><span class="p">;</span>
</span><span class='line'>                <span class="mh">3</span><span class="mi">&#39;d4</span><span class="o">:</span> <span class="n">o_y</span> <span class="o">=</span> <span class="mh">8&#39;b1110</span><span class="n">_1111</span><span class="p">;</span>
</span><span class='line'>                <span class="mh">3</span><span class="mi">&#39;d5</span><span class="o">:</span> <span class="n">o_y</span> <span class="o">=</span> <span class="mh">8&#39;b1101</span><span class="n">_1111</span><span class="p">;</span>
</span><span class='line'>                <span class="mh">3</span><span class="mi">&#39;d6</span><span class="o">:</span> <span class="n">o_y</span> <span class="o">=</span> <span class="mh">8&#39;b1011</span><span class="n">_1111</span><span class="p">;</span>
</span><span class='line'>                <span class="mh">3</span><span class="mi">&#39;d7</span><span class="o">:</span> <span class="n">o_y</span> <span class="o">=</span> <span class="mh">8&#39;b0111</span><span class="n">_1111</span><span class="p">;</span>
</span><span class='line'>                <span class="k">default</span><span class="o">:</span> <span class="n">o_y</span> <span class="o">=</span> <span class="mh">8&#39;b1111</span><span class="n">_1111</span><span class="p">;</span>
</span><span class='line'>            <span class="k">endcase</span>
</span><span class='line'>        <span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="k">endmodule</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Rtl</h3>

<p><img src="https://dl.dropboxusercontent.com/u/128996895/Blog/38%E8%AF%91%E7%A0%81%E5%99%A8/decoder_12_rtl.png" alt="image" />
<img src="https://dl.dropboxusercontent.com/u/128996895/Blog/38%E8%AF%91%E7%A0%81%E5%99%A8/decoder_12_base_rtl.png" alt="image" /></p>

<h2 id="decoder38_13">原理图方式</h2>


<p>好久没画原理图了，在Quartus中画原理图又让我找回了一点点感觉，特意增加了链接，点击可直接查看大图。</p>

<h3>原理图</h3>

<p><a href="https://dl.dropboxusercontent.com/u/128996895/Blog/38%E8%AF%91%E7%A0%81%E5%99%A8/decoder_13_bdf.png"><img src="https://dl.dropboxusercontent.com/u/128996895/Blog/38%E8%AF%91%E7%A0%81%E5%99%A8/decoder_13_bdf.png" alt="image" /></a></p>

<h3>Rtl</h3>

<p><img src="https://dl.dropboxusercontent.com/u/128996895/Blog/38%E8%AF%91%E7%A0%81%E5%99%A8/decoder_13_rtl.png" alt="image" /></p>

<h2 id="decoder38_14">真值表描述</h2>


<p>不知道以前是在哪看到的，说Quartus支持真值表文件描述，结果到写的时侯，找了一圈，才发现Quartus没有这个功能，好在，搜索的过程中发现AHDL支持真值表描述，于是我就用AHDL写了一个，写完后突然想起来，其实Verilog也有类似的写法，于是我又用Verilog写了一个。两种语言的写法很相似，它们生成的Rtl也是一样的。可以发现，用真值表描述，电路最简。（由于<code>pygments</code>和<code>gist</code>都不支持AHDL语言，所以AHDL代码没有语法高亮。）</p>

<h3>AHDL</h3>

<figure class='code'><figcaption><span>(decoder38_14.tdf)</span><a href='http://postget.me/downloads/code/decoder38/decoder38_14.tdf'>download </a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
</pre></td><td class='code'><pre><code class='text'><span class='line'>SUBDESIGN decoder38_14
</span><span class='line'>(
</span><span class='line'>    i_sel[2..0] : INPUT;
</span><span class='line'>    i_opt : INPUT;
</span><span class='line'>    o_y[7..0] : OUTPUT;
</span><span class='line'>)
</span><span class='line'>
</span><span class='line'>BEGIN
</span><span class='line'>    TABLE
</span><span class='line'>        i_sel[2..0], i_opt =&gt; o_y[7..0];
</span><span class='line'>        0, 0 =&gt; B&quot;11111110&quot;;
</span><span class='line'>        1, 0 =&gt; B&quot;11111101&quot;;
</span><span class='line'>        2, 0 =&gt; B&quot;11111011&quot;;
</span><span class='line'>        3, 0 =&gt; B&quot;11110111&quot;;
</span><span class='line'>        4, 0 =&gt; B&quot;11101111&quot;;
</span><span class='line'>        5, 0 =&gt; B&quot;11011111&quot;;
</span><span class='line'>        6, 0 =&gt; B&quot;10111111&quot;;
</span><span class='line'>        7, 0 =&gt; B&quot;01111111&quot;;
</span><span class='line'>        0, 1 =&gt; B&quot;00000001&quot;;
</span><span class='line'>        1, 1 =&gt; B&quot;00000010&quot;;
</span><span class='line'>        2, 1 =&gt; B&quot;00000100&quot;;
</span><span class='line'>        3, 1 =&gt; B&quot;00001000&quot;;
</span><span class='line'>        4, 1 =&gt; B&quot;00010000&quot;;
</span><span class='line'>        5, 1 =&gt; B&quot;00100000&quot;;
</span><span class='line'>        6, 1 =&gt; B&quot;01000000&quot;;
</span><span class='line'>        7, 1 =&gt; B&quot;10000000&quot;;
</span><span class='line'>    END TABLE;
</span><span class='line'>
</span><span class='line'>END;
</span></code></pre></td></tr></table></div></figure>


<h3>Verilog</h3>

<figure class='code'><figcaption><span> (decoder38_14.v)</span> <a href='http://postget.me/downloads/code/decoder38/decoder38_14.v'>download</a></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
</pre></td><td class='code'><pre><code class='v'><span class='line'><span class="k">module</span> <span class="n">decoder38_14_2</span> <span class="p">(</span><span class="n">i_sel</span><span class="p">,</span> <span class="n">i_opt</span><span class="p">,</span> <span class="n">o_y</span><span class="p">);</span>
</span><span class='line'>    <span class="k">input</span> <span class="p">[</span><span class="mh">2</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span> <span class="n">i_sel</span><span class="p">;</span>
</span><span class='line'>    <span class="k">input</span> <span class="n">i_opt</span><span class="p">;</span>
</span><span class='line'>    <span class="k">output</span> <span class="kt">reg</span> <span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span> <span class="n">o_y</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">always</span> <span class="p">@</span> <span class="p">(</span><span class="n">i_sel</span> <span class="k">or</span> <span class="n">i_opt</span><span class="p">)</span>
</span><span class='line'>        <span class="k">begin</span>
</span><span class='line'>            <span class="k">case</span> <span class="p">({</span><span class="n">i_sel</span><span class="p">[</span><span class="mh">2</span><span class="o">:</span><span class="mh">0</span><span class="p">],</span> <span class="n">i_opt</span><span class="p">})</span>
</span><span class='line'>                <span class="mh">3</span><span class="mi">&#39;d0</span><span class="p">,</span> <span class="mh">1&#39;b0</span><span class="o">:</span> <span class="n">o_y</span> <span class="o">=</span> <span class="mh">8&#39;b1111</span><span class="n">_1110</span><span class="p">;</span>
</span><span class='line'>                <span class="mh">3</span><span class="mi">&#39;d1</span><span class="p">,</span> <span class="mh">1&#39;b0</span><span class="o">:</span> <span class="n">o_y</span> <span class="o">=</span> <span class="mh">8&#39;b1111</span><span class="n">_1101</span><span class="p">;</span>
</span><span class='line'>                <span class="mh">3</span><span class="mi">&#39;d2</span><span class="p">,</span> <span class="mh">1&#39;b0</span><span class="o">:</span> <span class="n">o_y</span> <span class="o">=</span> <span class="mh">8&#39;b1111</span><span class="n">_1011</span><span class="p">;</span>
</span><span class='line'>                <span class="mh">3</span><span class="mi">&#39;d3</span><span class="p">,</span> <span class="mh">1&#39;b0</span><span class="o">:</span> <span class="n">o_y</span> <span class="o">=</span> <span class="mh">8&#39;b1111</span><span class="n">_0111</span><span class="p">;</span>
</span><span class='line'>                <span class="mh">3</span><span class="mi">&#39;d4</span><span class="p">,</span> <span class="mh">1&#39;b0</span><span class="o">:</span> <span class="n">o_y</span> <span class="o">=</span> <span class="mh">8&#39;b1110</span><span class="n">_1111</span><span class="p">;</span>
</span><span class='line'>                <span class="mh">3</span><span class="mi">&#39;d5</span><span class="p">,</span> <span class="mh">1&#39;b0</span><span class="o">:</span> <span class="n">o_y</span> <span class="o">=</span> <span class="mh">8&#39;b1101</span><span class="n">_1111</span><span class="p">;</span>
</span><span class='line'>                <span class="mh">3</span><span class="mi">&#39;d6</span><span class="p">,</span> <span class="mh">1&#39;b0</span><span class="o">:</span> <span class="n">o_y</span> <span class="o">=</span> <span class="mh">8&#39;b1011</span><span class="n">_1111</span><span class="p">;</span>
</span><span class='line'>                <span class="mh">3</span><span class="mi">&#39;d7</span><span class="p">,</span> <span class="mh">1&#39;b0</span><span class="o">:</span> <span class="n">o_y</span> <span class="o">=</span> <span class="mh">8&#39;b0111</span><span class="n">_1111</span><span class="p">;</span>
</span><span class='line'>                <span class="mh">3</span><span class="mi">&#39;d0</span><span class="p">,</span> <span class="mh">1&#39;b1</span><span class="o">:</span> <span class="n">o_y</span> <span class="o">=</span> <span class="mh">8&#39;b0000</span><span class="n">_0001</span><span class="p">;</span>
</span><span class='line'>                <span class="mh">3</span><span class="mi">&#39;d1</span><span class="p">,</span> <span class="mh">1&#39;b1</span><span class="o">:</span> <span class="n">o_y</span> <span class="o">=</span> <span class="mh">8&#39;b0000</span><span class="n">_0010</span><span class="p">;</span>
</span><span class='line'>                <span class="mh">3</span><span class="mi">&#39;d2</span><span class="p">,</span> <span class="mh">1&#39;b1</span><span class="o">:</span> <span class="n">o_y</span> <span class="o">=</span> <span class="mh">8&#39;b0000</span><span class="n">_0100</span><span class="p">;</span>
</span><span class='line'>                <span class="mh">3</span><span class="mi">&#39;d3</span><span class="p">,</span> <span class="mh">1&#39;b1</span><span class="o">:</span> <span class="n">o_y</span> <span class="o">=</span> <span class="mh">8&#39;b0000</span><span class="n">_1000</span><span class="p">;</span>
</span><span class='line'>                <span class="mh">3</span><span class="mi">&#39;d4</span><span class="p">,</span> <span class="mh">1&#39;b1</span><span class="o">:</span> <span class="n">o_y</span> <span class="o">=</span> <span class="mh">8&#39;b0001</span><span class="n">_0000</span><span class="p">;</span>
</span><span class='line'>                <span class="mh">3</span><span class="mi">&#39;d5</span><span class="p">,</span> <span class="mh">1&#39;b1</span><span class="o">:</span> <span class="n">o_y</span> <span class="o">=</span> <span class="mh">8&#39;b0010</span><span class="n">_0000</span><span class="p">;</span>
</span><span class='line'>                <span class="mh">3</span><span class="mi">&#39;d6</span><span class="p">,</span> <span class="mh">1&#39;b1</span><span class="o">:</span> <span class="n">o_y</span> <span class="o">=</span> <span class="mh">8&#39;b0100</span><span class="n">_0000</span><span class="p">;</span>
</span><span class='line'>                <span class="mh">3</span><span class="mi">&#39;d7</span><span class="p">,</span> <span class="mh">1&#39;b1</span><span class="o">:</span> <span class="n">o_y</span> <span class="o">=</span> <span class="mh">8&#39;b1000</span><span class="n">_0000</span><span class="p">;</span>
</span><span class='line'>                <span class="k">default</span><span class="o">:</span> <span class="n">o_y</span> <span class="o">=</span> <span class="mh">8&#39;hff</span><span class="p">;</span>
</span><span class='line'>            <span class="k">endcase</span>
</span><span class='line'>        <span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="k">endmodule</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Rtl</h3>

<p><img src="https://dl.dropboxusercontent.com/u/128996895/Blog/38%E8%AF%91%E7%A0%81%E5%99%A8/decoder_14_rtl.png" alt="image" /></p>

<h2 id="decoder38_15">门级描述</h2>


<h3>Verilog</h3>

<p>太复杂，不写了。</p>

<h3>Rtl</h3>

<p>同上。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Mou Sample]]></title>
    <link href="http://postget.me/blog/2013/08/04/mou/"/>
    <updated>2013-08-04T02:25:00+08:00</updated>
    <id>http://postget.me/blog/2013/08/04/mou</id>
    <content type="html"><![CDATA[<h1>Mou</h1>

<p><img src="http://mouapp.com/Mou_128.png" alt="Mou icon" /></p>

<h2>Overview</h2>

<p><strong>Mou</strong>, the missing Markdown editor for <em>web developers</em>.</p>

<h3>Syntax</h3>

<h4>Strong and Emphasize</h4>

<p><strong>strong</strong> or <strong>strong</strong> ( Cmd + B )</p>

<p><em>emphasize</em> or <em>emphasize</em> ( Cmd + I )</p>

<p><strong>Sometimes I want a lot of text to be bold.
Like, seriously, a <em>LOT</em> of text</strong></p>

<h4>Blockquotes</h4>

<blockquote><p>Right angle brackets &gt; are used for block quotes.</p></blockquote>

<h4>Links and Email</h4>

<p>An email <a href="&#x6d;&#x61;&#105;&#x6c;&#116;&#x6f;&#58;&#101;&#120;&#x61;&#109;&#x70;&#108;&#x65;&#64;&#x65;&#120;&#x61;&#109;&#x70;&#x6c;&#x65;&#x2e;&#99;&#111;&#109;">&#101;&#x78;&#97;&#x6d;&#x70;&#x6c;&#101;&#x40;&#101;&#x78;&#x61;&#x6d;&#x70;&#x6c;&#101;&#x2e;&#99;&#111;&#x6d;</a> link.</p>

<p>Simple inline link <a href="http://chenluois.com">http://chenluois.com</a>, another inline link <a href="http://smallerapp.com">Smaller</a>, one more inline link with title <a href="http://resizesafari.com" title="a Safari extension">Resize</a>.</p>

<p>A <a href="http://mouapp.com" title="Markdown editor on Mac OS X">reference style</a> link. Input id, then anywhere in the doc, define the link with corresponding id:</p>

<p>Titles ( or called tool tips ) in the links are optional.</p>

<h4>Images</h4>

<p>An inline image <img src="http://smallerapp.com/favicon.ico" title="Title here" alt="Smaller icon" />, title is optional.</p>

<p>A <img src="http://resizesafari.com/favicon.ico" title="Title" alt="Resize icon" /> reference style image.</p>

<h4>Inline code and Block code</h4>

<p>Inline code are surround by <code>backtick</code> key. To create a block code:</p>

<pre><code>Indent each line by at least 1 tab, or 4 spaces.
var Mou = exactlyTheAppIwant; 
</code></pre>

<h4>Ordered Lists</h4>

<p>Ordered lists are created using &ldquo;1.&rdquo; + Space:</p>

<ol>
<li>Ordered list item</li>
<li>Ordered list item</li>
<li>Ordered list item</li>
</ol>


<h4>Unordered Lists</h4>

<p>Unordered list are created using &ldquo;*&rdquo; + Space:</p>

<ul>
<li>Unordered list item</li>
<li>Unordered list item</li>
<li>Unordered list item</li>
</ul>


<p>Or using &ldquo;&ndash;&rdquo; + Space:</p>

<ul>
<li>Unordered list item</li>
<li>Unordered list item</li>
<li>Unordered list item</li>
</ul>


<h4>Hard Linebreak</h4>

<p>End a line with two or more spaces will create a hard linebreak, called <code>&lt;br /&gt;</code> in HTML. ( Control + Return )<br/>
Above line ended with 2 spaces.</p>

<h4>Horizontal Rules</h4>

<p>Three or more asterisks or dashes:</p>

<hr />

<hr />

<hr />

<h4>Headers</h4>

<p>Setext-style:</p>

<h1>This is H1</h1>

<h2>This is H2</h2>

<p>atx-style:</p>

<h1>This is H1</h1>

<h2>This is H2</h2>

<h3>This is H3</h3>

<h4>This is H4</h4>

<h5>This is H5</h5>

<h6>This is H6</h6>

<h3>Extra Syntax</h3>

<h4>Footnotes</h4>

<p>Footnotes work mostly like reference-style links. A footnote is made of two things: a marker in the text that will become a superscript number; a footnote definition that will be placed in a list of footnotes at the end of the document. A footnote looks like this:</p>

<p>That&rsquo;s some text with a footnote.<sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup></p>

<h4>Strikethrough</h4>

<p>Wrap with 2 tilde characters:</p>

<p><del>Strikethrough</del></p>

<h4>Fenced Code Blocks</h4>

<p>Start with a line containing 3 or more backticks, and ends with the first line with the same number of backticks:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Fenced code blocks are like Stardard Markdown’s regular code
</span><span class='line'>blocks, except that they’re not indented and instead rely on
</span><span class='line'>a start and end fence lines to delimit the code block.</span></code></pre></td></tr></table></div></figure>


<h4>Tables</h4>

<p>A simple table looks like this:</p>

<table>
<thead>
<tr>
<th>First Header </th>
<th> Second Header </th>
<th> Third Header</th>
</tr>
</thead>
<tbody>
<tr>
<td>Content Cell </td>
<td> Content Cell  </td>
<td> Content Cell</td>
</tr>
<tr>
<td>Content Cell </td>
<td> Content Cell  </td>
<td> Content Cell</td>
</tr>
</tbody>
</table>


<p>If you wish, you can add a leading and tailing pipe to each line of the table:</p>

<table>
<thead>
<tr>
<th></th>
<th> First Header </th>
<th> Second Header </th>
<th> Third Header </th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td> Content Cell </td>
<td> Content Cell  </td>
<td> Content Cell |</td>
</tr>
<tr>
<td></td>
<td> Content Cell </td>
<td> Content Cell  </td>
<td> Content Cell |</td>
</tr>
</tbody>
</table>


<p>Specify alignement for each column by adding colons to separator lines:</p>

<table>
<thead>
<tr>
<th align="left">First Header </th>
<th align="center"> Second Header </th>
<th align="right"> Third Header</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">Left         </td>
<td align="center"> Center        </td>
<td align="right"> Right</td>
</tr>
<tr>
<td align="left">Left         </td>
<td align="center"> Center        </td>
<td align="right"> Right</td>
</tr>
</tbody>
</table>


<h3>Shortcuts</h3>

<h4>View</h4>

<ul>
<li>Toggle live preview: Shift + Cmd + I</li>
<li>Toggle Words Counter: Shift + Cmd + W</li>
<li>Toggle Transparent: Shift + Cmd + T</li>
<li>Toggle Floating: Shift + Cmd + F</li>
<li>Left/Right = 1/1: Cmd + 0</li>
<li>Left/Right = 3/1: Cmd + +</li>
<li>Left/Right = 1/3: Cmd + &ndash;</li>
<li>Toggle Writing orientation: Cmd + L</li>
<li>Toggle fullscreen: Control + Cmd + F</li>
</ul>


<h4>Actions</h4>

<ul>
<li>Copy HTML: Option + Cmd + C</li>
<li>Strong: Select text, Cmd + B</li>
<li>Emphasize: Select text, Cmd + I</li>
<li>Inline Code: Select text, Cmd + K</li>
<li>Strikethrough: Select text, Cmd + U</li>
<li>Link: Select text, Control + Shift + L</li>
<li>Image: Select text, Control + Shift + I</li>
<li>Select Word: Control + Option + W</li>
<li>Select Line: Shift + Cmd + L</li>
<li>Select All: Cmd + A</li>
<li>Deselect All: Cmd + D</li>
<li>Convert to Uppercase: Select text, Control + U</li>
<li>Convert to Lowercase: Select text, Control + Shift + U</li>
<li>Convert to Titlecase: Select text, Control + Option + U</li>
<li>Convert to List: Select lines, Control + L</li>
<li>Convert to Blockquote: Select lines, Control + Q</li>
<li>Convert to H1: Cmd + 1</li>
<li>Convert to H2: Cmd + 2</li>
<li>Convert to H3: Cmd + 3</li>
<li>Convert to H4: Cmd + 4</li>
<li>Convert to H5: Cmd + 5</li>
<li>Convert to H6: Cmd + 6</li>
<li>Convert Spaces to Tabs: Control + [</li>
<li>Convert Tabs to Spaces: Control + ]</li>
<li>Insert Current Date: Control + Shift + 1</li>
<li>Insert Current Time: Control + Shift + 2</li>
<li>Insert entity &lt;: Control + Shift + ,</li>
<li>Insert entity >: Control + Shift + .</li>
<li>Insert entity &amp;: Control + Shift + 7</li>
<li>Insert entity Space: Control + Shift + Space</li>
<li>Insert Scriptogr.am Header: Control + Shift + G</li>
<li>Shift Line Left: Select lines, Cmd + [</li>
<li>Shift Line Right: Select lines, Cmd + ]</li>
<li>New Line: Cmd + Return</li>
<li>Comment: Cmd + /</li>
<li>Hard Linebreak: Control + Return</li>
</ul>


<h4>Edit</h4>

<ul>
<li>Auto complete current word: Esc</li>
<li>Find: Cmd + F</li>
<li>Close find bar: Esc</li>
</ul>


<h4>Post</h4>

<ul>
<li>Post on Scriptogr.am: Control + Shift + S</li>
<li>Post on Tumblr: Control + Shift + T</li>
</ul>


<h4>Export</h4>

<ul>
<li>Export HTML: Option + Cmd + E</li>
<li>Export PDF:  Option + Cmd + P</li>
</ul>


<h3>And more?</h3>

<p>Don&rsquo;t forget to check Preferences, lots of useful options are there.</p>

<p>Follow <a href="http://twitter.com/chenluois">@chenluois</a> on Twitter for the latest news.</p>

<p>For feedback, use the menu <code>Help</code> &ndash; <code>Send Feedback</code></p>
<div class="footnotes">
<hr/>
<ol>
<li id="fn:1">
<p>And that&rsquo;s the footnote.<a href="#fnref:1" rev="footnote">&#8617;</a></p></li>
</ol>
</div>

]]></content>
  </entry>
  
</feed>
